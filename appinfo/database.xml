<?xml version="1.0" encoding="ISO-8859-1" ?>
<database>
	<name>*dbname*</name>
	<create>true</create>
	<overwrite>false</overwrite>
	<charset>utf8</charset>

	<table>
		<name>*dbprefix*notifications</name>
		<declaration>
			<field>
				<name>notification_id</name>
				<type>integer</type>
				<default>0</default>
				<notnull>true</notnull>
				<autoincrement>1</autoincrement>
				<length>4</length>
			</field>
			<field>
				<name>app</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>32</length>
			</field>
			<field>
				<name>user</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>64</length>
			</field>
			<field>
				<name>timestamp</name>
				<type>integer</type>
				<default>0</default>
				<notnull>true</notnull>
				<length>4</length>
			</field>
			<field>
				<name>object_type</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>64</length>
			</field>
			<field>
				<name>object_id</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>64</length>
			</field>
			<field>
				<name>subject</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>64</length>
			</field>
			<field>
				<name>subject_parameters</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>message</name>
				<type>text</type>
				<notnull>false</notnull>
				<length>64</length>
			</field>
			<field>
				<name>message_parameters</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>link</name>
				<type>text</type>
				<notnull>false</notnull>
				<length>4000</length>
			</field>
			<field>
				<name>icon</name>
				<type>text</type>
				<notnull>false</notnull>
				<length>4000</length>
			</field>
			<field>
				<name>actions</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>

			<index>
				<name>oc_notifications_app</name>
				<field>
					<name>app</name>
				</field>
			</index>

			<index>
				<name>oc_notifications_user</name>
				<field>
					<name>user</name>
				</field>
			</index>

			<index>
				<name>oc_notifications_timestamp</name>
				<field>
					<name>timestamp</name>
				</field>
			</index>

			<index>
				<name>oc_notifications_object</name>
				<field>
					<name>object_type</name>
				</field>
				<field>
					<name>object_id</name>
				</field>
			</index>
		</declaration>
	</table>

	<table>
		<name>*dbprefix*notifications_pushtokens</name>
		<declaration>
			<field>
				<name>uid</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>64</length>
			</field>
			<field>
				<name>token</name>
				<type>integer</type>
				<default>0</default>
				<notnull>true</notnull>
				<length>4</length>
			</field>
			<field>
				<name>deviceidentifier</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>128</length>
			</field>
			<field>
				<name>devicepublickey</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>512</length>
			</field>
			<field>
				<name>devicepublickeyhash</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>128</length>
			</field>
			<field>
				<name>pushtokenhash</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>128</length>
			</field>

			<index>
				<name>oc_notifpushtoken</name>
				<unique>true</unique>
				<field>
					<name>uid</name>
				</field>
				<field>
					<name>token</name>
				</field>
			</index>
		</declaration>
	</table>
</database>
