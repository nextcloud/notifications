{"version":3,"file":"notifications-admin-settings.mjs","sources":["../src/views/AdminSettings.vue","../src/adminSettings.js"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<NcSettingsSection\n\t\t:name=\"t('notifications', 'Notifications defaults')\"\n\t\t:description=\"t('notifications', 'Configure the default notification settings')\">\n\t\t<p>\n\t\t\t<label for=\"notify_setting_batchtime\" class=\"notification-frequency__label\">\n\t\t\t\t{{ t('notifications', 'Send email reminders about unhandled notifications after:') }}\n\t\t\t</label>\n\t\t\t<select\n\t\t\t\tid=\"notify_setting_batchtime\"\n\t\t\t\tv-model=\"config.setting_batchtime\"\n\t\t\t\tclass=\"notification-frequency__select\"\n\t\t\t\t@change=\"updateSettings()\">\n\t\t\t\t<option v-for=\"option in batchtime_options\" :key=\"option.value\" :value=\"option.value\">\n\t\t\t\t\t{{ option.text }}\n\t\t\t\t</option>\n\t\t\t</select>\n\t\t</p>\n\n\t\t<NcCheckboxRadioSwitch\n\t\t\tv-model=\"config.sound_notification\"\n\t\t\t@update:model-value=\"updateSettings\">\n\t\t\t{{ t('notifications', 'Play sound when a new notification arrives') }}\n\t\t</NcCheckboxRadioSwitch>\n\t\t<NcCheckboxRadioSwitch\n\t\t\tv-model=\"config.sound_talk\"\n\t\t\t@update:model-value=\"updateSettings\">\n\t\t\t{{ t('notifications', 'Play sound when a call started (requires Nextcloud Talk)') }}\n\t\t</NcCheckboxRadioSwitch>\n\t</NcSettingsSection>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport { loadState } from '@nextcloud/initial-state'\nimport { t } from '@nextcloud/l10n'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/components/NcCheckboxRadioSwitch'\nimport NcSettingsSection from '@nextcloud/vue/components/NcSettingsSection'\n\nconst EmailFrequency = {\n\tEMAIL_SEND_OFF: 0,\n\tEMAIL_SEND_HOURLY: 1,\n\tEMAIL_SEND_3HOURLY: 2,\n\tEMAIL_SEND_DAILY: 3,\n\tEMAIL_SEND_WEEKLY: 4,\n}\n\nexport default {\n\tname: 'AdminSettings',\n\tcomponents: {\n\t\tNcCheckboxRadioSwitch,\n\t\tNcSettingsSection,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tbatchtime_options: [\n\t\t\t\t{ text: t('notifications', 'Never'), value: EmailFrequency.EMAIL_SEND_OFF },\n\t\t\t\t{ text: t('notifications', '1 hour'), value: EmailFrequency.EMAIL_SEND_HOURLY },\n\t\t\t\t{ text: t('notifications', '3 hours'), value: EmailFrequency.EMAIL_SEND_3HOURLY },\n\t\t\t\t{ text: t('notifications', '1 day'), value: EmailFrequency.EMAIL_SEND_DAILY },\n\t\t\t\t{ text: t('notifications', '1 week'), value: EmailFrequency.EMAIL_SEND_WEEKLY },\n\t\t\t],\n\n\t\t\tconfig: loadState('notifications', 'config'),\n\t\t}\n\t},\n\n\tmethods: {\n\t\tt,\n\n\t\tasync updateSettings() {\n\t\t\ttry {\n\t\t\t\tconst form = new FormData()\n\t\t\t\tform.append('batchSetting', this.config.setting_batchtime)\n\t\t\t\tform.append('soundNotification', this.config.sound_notification ? 'yes' : 'no')\n\t\t\t\tform.append('soundTalk', this.config.sound_talk ? 'yes' : 'no')\n\t\t\t\tawait axios.post(generateOcsUrl('apps/notifications/api/v2/settings/admin'), form)\n\t\t\t\tshowSuccess(t('notifications', 'Your settings have been updated.'))\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('notifications', 'An error occurred while updating your settings.'))\n\t\t\t\tconsole.error(error)\n\t\t\t}\n\t\t},\n\t},\n}\n\n</script>\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { createApp } from 'vue'\nimport AdminSettings from './views/AdminSettings.vue'\n\n// Styles\nimport '@nextcloud/dialogs/style.css'\n\nexport default createApp(AdminSettings).mount('#notifications-admin-settings')\n"],"names":["EmailFrequency","_sfc_main","NcCheckboxRadioSwitch","NcSettingsSection","t","loadState","form","axios","generateOcsUrl","showSuccess","error","showError","_createBlock","_component_NcSettingsSection","$options","_createElementVNode","_hoisted_1","_toDisplayString","_cache","$event","$data","_createElementBlock","_Fragment","_renderList","option","_hoisted_2","_vModelSelect","_createVNode","_component_NcCheckboxRadioSwitch","createApp","AdminSettings"],"mappings":";kUA8CA,MAAMA,EAAiB,CACtB,eAAgB,EAChB,kBAAmB,EACnB,mBAAoB,EACpB,iBAAkB,EAClB,kBAAmB,CACpB,EAEKC,EAAU,CACd,KAAM,gBACN,WAAY,CACX,sBAAAC,EACA,kBAAAC,CACA,EAED,MAAO,CACN,MAAO,CACN,kBAAmB,CAClB,CAAE,KAAMC,EAAE,gBAAiB,OAAO,EAAG,MAAOJ,EAAe,cAAgB,EAC3E,CAAE,KAAMI,EAAE,gBAAiB,QAAQ,EAAG,MAAOJ,EAAe,iBAAmB,EAC/E,CAAE,KAAMI,EAAE,gBAAiB,SAAS,EAAG,MAAOJ,EAAe,kBAAoB,EACjF,CAAE,KAAMI,EAAE,gBAAiB,OAAO,EAAG,MAAOJ,EAAe,gBAAkB,EAC7E,CAAE,KAAMI,EAAE,gBAAiB,QAAQ,EAAG,MAAOJ,EAAe,iBAAmB,CAC/E,EAED,OAAQK,EAAU,gBAAiB,QAAQ,CAC5C,CACA,EAED,QAAS,GACRD,EAEA,MAAM,gBAAiB,CACtB,GAAI,CACH,MAAME,EAAO,IAAI,SACjBA,EAAK,OAAO,eAAgB,KAAK,OAAO,iBAAiB,EACzDA,EAAK,OAAO,oBAAqB,KAAK,OAAO,mBAAqB,MAAQ,IAAI,EAC9EA,EAAK,OAAO,YAAa,KAAK,OAAO,WAAa,MAAQ,IAAI,EAC9D,MAAMC,EAAM,KAAKC,EAAe,0CAA0C,EAAGF,CAAI,EACjFG,EAAYL,EAAE,gBAAiB,kCAAkC,CAAC,CACjE,OAAOM,EAAO,CACfC,EAAUP,EAAE,gBAAiB,iDAAiD,CAAC,EAC/E,QAAQ,MAAMM,CAAK,CACpB,CACA,CACD,CACF,KAlFU,IAAI,2BAA2B,MAAM,4IAJ9CE,EA4BoBC,EAAA,CA3BlB,KAAMC,EAAC,EAAA,gBAAA,wBAAA,EACP,YAAaA,EAAC,EAAA,gBAAA,6CAAA,cACf,IAaI,CAbJC,EAaI,IAAA,KAAA,CAZHA,EAEQ,QAFRC,EAEQC,EADJH,EAAC,EAAA,gBAAA,2DAAA,CAAA,EAAA,CAAA,IAELC,EAQS,SAAA,CAPR,GAAG,2BACM,sBAAAG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAC,EAAA,OAAO,kBAAiBD,GACjC,MAAM,iCACL,wBAAQL,EAAc,2BACvBO,EAESC,EAAA,KAAAC,EAFgBH,EAAiB,kBAA3BI,QAAfH,EAES,SAAA,CAFoC,IAAKG,EAAO,MAAQ,MAAOA,EAAO,KAC3E,EAAAP,EAAAO,EAAO,IAAI,EAAA,EAAAC,CAAA,iBAJN,CAAAC,EAAAN,EAAA,OAAO,iBAAiB,MASnCO,EAIwBC,EAAA,CAHd,WAAAR,EAAA,OAAO,0CAAPF,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAC,EAAA,OAAO,mBAAkBD,GACbL,EAAc,4BACnC,IAAsE,KAAnEA,EAAC,EAAA,gBAAA,4CAAA,CAAA,EAAA,CAAA,iDAELa,EAIwBC,EAAA,CAHd,WAAAR,EAAA,OAAO,kCAAPF,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAC,EAAA,OAAO,WAAUD,GACLL,EAAc,4BACnC,IAAoF,KAAjFA,EAAC,EAAA,gBAAA,0DAAA,CAAA,EAAA,CAAA,8GCrBQe,EAAUC,CAAa,EAAE,MAAM,+BAA+B"}