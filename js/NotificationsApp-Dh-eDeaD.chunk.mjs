var hi=Object.defineProperty,mi=Object.defineProperties;var gi=Object.getOwnPropertyDescriptors;var Tn=Object.getOwnPropertySymbols;var yi=Object.prototype.hasOwnProperty,bi=Object.prototype.propertyIsEnumerable;var Se=(c,g)=>(g=Symbol[c])?g:Symbol.for("Symbol."+c),wi=c=>{throw TypeError(c)};var vt=(c,g,o)=>g in c?hi(c,g,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[g]=o,oe=(c,g)=>{for(var o in g||(g={}))yi.call(g,o)&&vt(c,o,g[o]);if(Tn)for(var o of Tn(g))bi.call(g,o)&&vt(c,o,g[o]);return c},Pe=(c,g)=>mi(c,gi(g));var Ie=(c,g,o)=>vt(c,typeof g!="symbol"?g+"":g,o);var Ae=function(c,g){this[0]=c,this[1]=g},At=(c,g,o)=>{var l=(v,I,A,T)=>{try{var B=o[v](I),e=(I=B.value)instanceof Ae,n=B.done;Promise.resolve(e?I[0]:I).then(r=>e?l(v==="return"?v:"next",I[1]?{done:r.done,value:r.value}:r,A,T):A({value:r,done:n})).catch(r=>l("throw",r,A,T))}catch(r){T(r)}},f=v=>b[v]=I=>new Promise((A,T)=>l(v,I,A,T)),b={};return o=o.apply(c,g),b[Se("asyncIterator")]=()=>b,f("next"),f("throw"),f("return"),b},Tt=c=>{var g=c[Se("asyncIterator")],o=!1,l,f={};return g==null?(g=c[Se("iterator")](),l=b=>f[b]=v=>g[b](v)):(g=g.call(c),l=b=>f[b]=v=>{if(o){if(o=!1,b==="throw")throw v;return v}return o=!0,{done:!1,value:new Ae(new Promise(I=>{var A=g[b](v);A instanceof Object||wi("Object expected"),I(A)}),1)}}),f[Se("iterator")]=()=>f,l("next"),"throw"in g?l("throw"):f.throw=b=>{throw b},"return"in g&&l("return"),f},xn=(c,g,o)=>(g=c[Se("asyncIterator")])?g.call(c):(c=c[Se("iterator")](),g={},o=(l,f)=>(f=c[l])&&(g[l]=b=>new Promise((v,I,A)=>(b=f.call(c,b),A=b.done,Promise.resolve(b.value).then(T=>v({value:T,done:A}),I)))),o("next"),o("return"),g);import{e as et,u as vi,f as Ai,g as kn,o as Ti,h as xi,i as ki,j as Si,k as Ii,m as tt,R as Ei,n as Oi,p as Ni,r as Ri,q as Ci,w as Pi,x as Bi,y as Sn,z as Ee,B as Fi,_ as fe,A as ji,t as le,C as Li,d as Qe,v as Ct,s as Nt,D as Ze,E as Mi,l as Ye,F as In,G as Ui,H as xt,I as Di,J as kt,K as qi}from"./index-Dh8t1o6F-Q6F6XaT_.chunk.mjs";import{l as nt,f as j,o as P,g as G,m as de,t as $,h as Be,k as te,n as En,u as ye,j as On,p as St,q as Xn,s as Hi,a as Q,w as J,e as ie,v as Nn,x as Vi,b as X,y as Rn,z as Pt,A as Rt,B as Cn,C as $i,D as Gi,E as Fe,G as zi,r as ee,F as Kn,H as Qn,T as Wi,I as Ji,J as Xi}from"./style-3CHj422B.chunk.mjs";import{B as K}from"./BrowserStorage-xaPYAWq7.chunk.mjs";import"./vite-preload-helper-B9rAsR6N.chunk.mjs";const Ki={class:"empty-content",role:"note"},Qi={key:0,class:"empty-content__icon","aria-hidden":"true"},Zi={key:0,class:"empty-content__name"},Yi={key:1,class:"empty-content__description"},er={key:2,class:"empty-content__action"},tr=nt({__name:"NcEmptyContent",props:{description:{default:""},name:{default:""}},setup(c){return(g,o)=>(P(),j("div",Ki,[g.$slots.icon?(P(),j("div",Qi,[de(g.$slots,"icon",{},void 0,!0)])):G("",!0),de(g.$slots,"name",{},()=>[g.name!==""?(P(),j("span",Zi,$(g.name),1)):G("",!0)],!0),g.description!==""||g.$slots.description?(P(),j("p",Yi,[de(g.$slots,"description",{},()=>[Be($(g.description),1)],!0)])):G("",!0),g.$slots.action?(P(),j("div",er,[de(g.$slots,"action",{},void 0,!0)])):G("",!0)]))}}),nr=et(tr,[["__scopeId","data-v-697cfd8f"]]),or=["data-timestamp","title","textContent"],ir=nt({__name:"NcDateTime",props:{timestamp:{},format:{default:()=>({timeStyle:"medium",dateStyle:"short"})},relativeTime:{type:[Boolean,String],default:"long"},ignoreSeconds:{type:Boolean}},setup(c){const g=c,o=te(()=>({format:g.format})),l=te(()=>({ignoreSeconds:g.ignoreSeconds,relativeTime:g.relativeTime||"long",update:g.relativeTime!==!1})),f=vi(En(()=>g.timestamp),o),b=Ai(En(()=>g.timestamp),l),v=te(()=>g.relativeTime?b.value:f.value);return(I,A)=>(P(),j("span",{class:"nc-datetime",dir:"auto","data-timestamp":I.timestamp,title:ye(f),textContent:$(v.value)},null,8,or))}}),rr=["id"],sr={class:"header-menu__caret"},ar=["id"],ur={ref:"contentContainer",class:"header-menu__content"},lr=nt({__name:"NcHeaderMenu",props:{id:{},ariaLabel:{default:()=>{}},open:{type:Boolean,default:!1},isNav:{type:Boolean,default:!1},description:{default:()=>{}},excludeClickOutsideSelectors:{default:()=>[]}},emits:["closed","opened","update:open"],setup(c,{emit:g}){const o=g,l=kn(),f=kn(),b=On(),v=On(c.open),I=te(()=>c.isNav?"nav":"div"),A=St("contentContainer"),T=St("headerMenu"),B=St("triggerButton"),e=te(()=>Array.isArray(c.excludeClickOutsideSelectors)?c.excludeClickOutsideSelectors:c.excludeClickOutsideSelectors.split(" "));Ti(T,()=>r(!1),{ignore:e}),xi("Escape",()=>r(!1),{prevent:!0}),ki(v,{disabled:()=>!c.isNav}),Xn(()=>c.open,p=>r(p));function n(){r(!v.value)}async function r(p){p!==v.value&&(v.value=p,o("update:open",p),await Hi(),await(p?_():y()),o(p?"opened":"closed"))}function u(p){var x;c.isNav&&p.relatedTarget instanceof Node&&((x=T.value)!=null&&x.contains(p.relatedTarget))&&r(!1)}async function _(){var p;c.isNav||b.value||(b.value=Si(A.value,{allowOutsideClick:!0,trapStack:Ii(),fallbackFocus:(p=B.value)==null?void 0:p.$el}),b.value.activate())}function y(){var p;(p=b.value)==null||p.deactivate(),b.value=void 0}return(p,x)=>(P(),Q(Rt(I.value),{id:p.id,ref:"headerMenu","aria-labelledby":p.isNav?ye(f):null,class:Pt([{"header-menu--opened":v.value},"header-menu"]),onFocusout:u},{default:J(()=>[ie(ye(tt),{id:p.isNav?ye(f):null,ref:"triggerButton","aria-controls":"header-menu-".concat(p.id),"aria-expanded":v.value.toString(),"aria-label":p.ariaLabel,class:"header-menu__trigger",size:"large",variant:"tertiary-no-background",onClick:Vi(n,["prevent"])},{icon:J(()=>[de(p.$slots,"trigger",{},void 0,!0)]),_:3},8,["id","aria-controls","aria-expanded","aria-label"]),p.description?(P(),j("span",{key:0,id:ye(l),class:"header-menu__description hidden-visually"},$(p.description),9,rr)):G("",!0),Nn(X("div",sr,null,512),[[Rn,v.value]]),Nn(X("div",{id:"header-menu-".concat(p.id),class:"header-menu__wrapper"},[X("div",ur,[de(p.$slots,"default",{},void 0,!0)],512)],8,ar),[[Rn,v.value]])]),_:3},40,["id","aria-labelledby","class"]))}}),cr=et(lr,[["__scopeId","data-v-d45c5788"]]),dr={};function fr(c,g){return P(),j("div",null,[de(c.$slots,"trigger")])}const pr=et(dr,[["render",fr]]),_r={class:"user-bubble__name"},hr={key:0,class:"user-bubble__secondary"},mr=nt({__name:"NcUserBubble",props:Cn({avatarImage:{default:void 0},user:{default:void 0},displayName:{default:void 0},showUserStatus:{type:Boolean},url:{default:void 0},to:{default:void 0},primary:{type:Boolean},size:{default:20},margin:{default:2}},{open:{type:Boolean},openModifiers:{}}),emits:Cn(["click"],["update:open"]),setup(c,{emit:g}){const o=$i(c,"open"),l=c,f=g,b=te(()=>{if(!l.avatarImage)return!1;try{return!!new URL(l.avatarImage)}catch(n){return!1}}),v=te(()=>!!l.avatarImage),I=te(()=>({marginInlineStart:"".concat(l.margin,"px")})),A=te(()=>{var n,r;if(!l.url||l.url.trim()==="")return!1;try{return!!new URL(l.url,(r=(n=l.url)==null?void 0:n.startsWith)!=null&&r.call(n,"/")?window.location.href:void 0)}catch(u){return Gi("[NcUserBubble] Invalid URL passed",{url:l.url}),!1}}),T=te(()=>A.value?l.url:void 0),B=te(()=>A.value?"a":l.to?Ei:"div"),e=te(()=>({height:"".concat(l.size,"px"),lineHeight:"".concat(l.size,"px"),borderRadius:"".concat(l.size/2,"px")}));return Xn([()=>l.displayName,()=>l.user],()=>{!l.displayName&&l.user}),(n,r)=>(P(),Q(Rt(n.$slots.default?ye(Ni):pr),{shown:o.value,"onUpdate:shown":r[1]||(r[1]=u=>o.value=u),class:"user-bubble__wrapper",trigger:"hover focus"},{trigger:J(({attrs:u})=>[(P(),Q(Rt(B.value),Fe({class:["user-bubble__content",{"user-bubble__content--primary":n.primary}],style:e.value,to:n.to,href:T.value},u,{onClick:r[0]||(r[0]=_=>f("click",_))}),{default:J(()=>[ie(ye(Oi),{url:v.value&&b.value?n.avatarImage:void 0,"icon-class":v.value&&!b.value?n.avatarImage:void 0,user:n.user,"display-name":n.displayName,size:n.size-n.margin*2,style:zi(I.value),"disable-tooltip":!0,"disable-menu":!0,"hide-status":!n.showUserStatus,class:"user-bubble__avatar"},null,8,["url","icon-class","user","display-name","size","style","hide-status"]),X("span",_r,$(n.displayName||n.user),1),n.$slots.name?(P(),j("span",hr,[de(n.$slots,"name",{},void 0,!0)])):G("",!0)]),_:2},1040,["class","style","to","href"]))]),default:J(()=>[de(n.$slots,"default",{},void 0,!0)]),_:3},40,["shown"]))}}),gr=et(mr,[["__scopeId","data-v-37bde6b7"]]);var ce={},Pn={},Bn={},Fn;function yr(){return Fn||(Fn=1,function(c){Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});function g(o,l,f){const b=document.querySelector("#initial-state-".concat(o,"-").concat(l));if(b===null){if(f!==void 0)return f;throw new Error("Could not find initial state ".concat(l," of ").concat(o))}try{return JSON.parse(atob(b.value))}catch(v){throw new Error("Could not parse initial state ".concat(l," of ").concat(o))}}c.loadState=g}(Bn)),Bn}var jn;function br(){return jn||(jn=1,function(c){Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});const g=yr();function o(){try{return g.loadState("core","capabilities")}catch(l){return console.debug("Could not find capabilities initial state fall back to _oc_capabilities"),"_oc_capabilities"in window?window._oc_capabilities:{}}}c.getCapabilities=o}(Pn)),Pn}var Ln={},Mn={},Un={},Dn;function Zn(){return Dn||(Dn=1,function(c){Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});const g=Ri(),o=Ci(),l=r=>r&&r.__esModule?r:{default:r},f=l(g),b=l(o);class v{constructor(u){Ie(this,"bus");typeof u.getVersion!="function"||!f.default(u.getVersion())?console.warn("Proxying an event bus with an unknown or invalid version"):b.default(u.getVersion())!==b.default(this.getVersion())&&console.warn("Proxying an event bus of version "+u.getVersion()+" with "+this.getVersion()),this.bus=u}getVersion(){return"3.3.2"}subscribe(u,_){this.bus.subscribe(u,_)}unsubscribe(u,_){this.bus.unsubscribe(u,_)}emit(u,..._){this.bus.emit(u,..._)}}class I{constructor(){Ie(this,"handlers",new Map)}getVersion(){return"3.3.2"}subscribe(u,_){this.handlers.set(u,(this.handlers.get(u)||[]).concat(_))}unsubscribe(u,_){this.handlers.set(u,(this.handlers.get(u)||[]).filter(y=>y!==_))}emit(u,..._){(this.handlers.get(u)||[]).forEach(y=>{try{y(_[0])}catch(p){console.error("could not invoke event listener",p)}})}}let A=null;function T(){var r;return A!==null?A:typeof window>"u"?new Proxy({},{get:()=>()=>console.error("Window not available, EventBus can not be established!")}):((r=window.OC)!=null&&r._eventBus&&typeof window._nc_event_bus>"u"&&(console.warn("found old event bus instance at OC._eventBus. Update your version!"),window._nc_event_bus=window.OC._eventBus),typeof(window==null?void 0:window._nc_event_bus)<"u"?A=new v(window._nc_event_bus):A=window._nc_event_bus=new I,A)}function B(r,u){T().subscribe(r,u)}function e(r,u){T().unsubscribe(r,u)}function n(r,...u){T().emit(r,...u)}c.ProxyBus=v,c.SimpleBus=I,c.emit=n,c.subscribe=B,c.unsubscribe=e}(Un)),Un}const wr=Pi(Bi);var qn;function vr(){return qn||(qn=1,function(c){Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});const g=Zn(),o=wr;let l;const f=[];function b(){var x;return l===void 0&&(l=(x=document.head.dataset.requesttoken)!=null?x:null),l}function v(x){f.push(x)}g.subscribe("csrf-token-update",x=>{l=x.token,f.forEach(C=>{try{C(l)}catch(F){console.error("Error updating CSRF token observer",F)}})});function I(){const x=document==null?void 0:document.querySelector('meta[name="csp-nonce"]');if(!x){const C=b();return C?btoa(C):void 0}return x.nonce}const A=o.getBuilder("public").persist().build();class T{constructor(){Ie(this,"_displayName");Ie(this,"uid");Ie(this,"isAdmin");A.getItem("guestUid")||A.setItem("guestUid",u()),this._displayName=A.getItem("guestNickname")||"",this.uid=A.getItem("guestUid")||u(),this.isAdmin=!1,g.subscribe("user:info:changed",C=>{this._displayName=C.displayName,A.setItem("guestNickname",C.displayName||"")})}get displayName(){return this._displayName}set displayName(C){this._displayName=C,A.setItem("guestNickname",C),g.emit("user:info:changed",this)}}let B;function e(){return B||(B=new T),B}function n(){var x;return((x=e())==null?void 0:x.displayName)||null}function r(x){if(!x||x.trim().length===0)throw new Error("Nickname cannot be empty");e().displayName=x}function u(){var x;return(x=globalThis.crypto)!=null&&x.randomUUID?globalThis.crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,C=>{const F=Math.random()*16|0;return(C==="x"?F:F&3|8).toString(16)})}let _;function y(x,C){return x?x.getAttribute(C):null}function p(){if(_!==void 0)return _;const x=document==null?void 0:document.getElementsByTagName("head")[0];if(!x)return null;const C=y(x,"data-user");return C===null?(_=null,_):(_={uid:C,displayName:y(x,"data-user-displayname"),isAdmin:!!window._oc_isadmin},_)}c.getCSPNonce=I,c.getCurrentUser=p,c.getGuestNickname=n,c.getGuestUser=e,c.getRequestToken=b,c.onRequestTokenUpdate=v,c.setGuestNickname=r}(Mn)),Mn}var It,Hn;function Ar(){if(Hn)return It;Hn=1;function c(t,i){return function(){return t.apply(i,arguments)}}const{toString:g}=Object.prototype,{getPrototypeOf:o}=Object,{iterator:l,toStringTag:f}=Symbol,b=(t=>i=>{const s=g.call(i);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),v=t=>(t=t.toLowerCase(),i=>b(i)===t),I=t=>i=>typeof i===t,{isArray:A}=Array,T=I("undefined");function B(t){return t!==null&&!T(t)&&t.constructor!==null&&!T(t.constructor)&&u(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const e=v("ArrayBuffer");function n(t){let i;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?i=ArrayBuffer.isView(t):i=t&&t.buffer&&e(t.buffer),i}const r=I("string"),u=I("function"),_=I("number"),y=t=>t!==null&&typeof t=="object",p=t=>t===!0||t===!1,x=t=>{if(b(t)!=="object")return!1;const i=o(t);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(f in t)&&!(l in t)},C=t=>{if(!y(t)||B(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch(i){return!1}},F=v("Date"),H=v("File"),re=v("Blob"),Te=v("FileList"),Oe=t=>y(t)&&u(t.pipe),D=t=>{let i;return t&&(typeof FormData=="function"&&t instanceof FormData||u(t.append)&&((i=b(t))==="formdata"||i==="object"&&u(t.toString)&&t.toString()==="[object FormData]"))},je=v("URLSearchParams"),[Le,ot,Me,pe]=["ReadableStream","Request","Response","Headers"].map(v),it=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ne(t,i,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let a,d;if(typeof t!="object"&&(t=[t]),A(t))for(a=0,d=t.length;a<d;a++)i.call(null,t[a],a,t);else{if(B(t))return;const m=s?Object.getOwnPropertyNames(t):Object.keys(t),h=m.length;let k;for(a=0;a<h;a++)k=m[a],i.call(null,t[k],k,t)}}function Bt(t,i){if(B(t))return null;i=i.toLowerCase();const s=Object.keys(t);let a=s.length,d;for(;a-- >0;)if(d=s[a],i===d.toLowerCase())return d;return null}const be=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ee,Ft=t=>!T(t)&&t!==be;function rt(){const{caseless:t,skipUndefined:i}=Ft(this)&&this||{},s={},a=(d,m)=>{const h=t&&Bt(s,m)||m;x(s[h])&&x(d)?s[h]=rt(s[h],d):x(d)?s[h]=rt({},d):A(d)?s[h]=d.slice():(!i||!T(d))&&(s[h]=d)};for(let d=0,m=arguments.length;d<m;d++)arguments[d]&&Ne(arguments[d],a);return s}const no=(t,i,s,{allOwnKeys:a}={})=>(Ne(i,(d,m)=>{s&&u(d)?t[m]=c(d,s):t[m]=d},{allOwnKeys:a}),t),oo=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),io=(t,i,s,a)=>{t.prototype=Object.create(i.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:i.prototype}),s&&Object.assign(t.prototype,s)},ro=(t,i,s,a)=>{let d,m,h;const k={};if(i=i||{},t==null)return i;do{for(d=Object.getOwnPropertyNames(t),m=d.length;m-- >0;)h=d[m],(!a||a(h,t,i))&&!k[h]&&(i[h]=t[h],k[h]=!0);t=s!==!1&&o(t)}while(t&&(!s||s(t,i))&&t!==Object.prototype);return i},so=(t,i,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=i.length;const a=t.indexOf(i,s);return a!==-1&&a===s},ao=t=>{if(!t)return null;if(A(t))return t;let i=t.length;if(!_(i))return null;const s=new Array(i);for(;i-- >0;)s[i]=t[i];return s},uo=(t=>i=>t&&i instanceof t)(typeof Uint8Array<"u"&&o(Uint8Array)),lo=(t,i)=>{const s=(t&&t[l]).call(t);let a;for(;(a=s.next())&&!a.done;){const d=a.value;i.call(t,d[0],d[1])}},co=(t,i)=>{let s;const a=[];for(;(s=t.exec(i))!==null;)a.push(s);return a},fo=v("HTMLFormElement"),po=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,s,a){return s.toUpperCase()+a}),jt=(({hasOwnProperty:t})=>(i,s)=>t.call(i,s))(Object.prototype),_o=v("RegExp"),Lt=(t,i)=>{const s=Object.getOwnPropertyDescriptors(t),a={};Ne(s,(d,m)=>{let h;(h=i(d,m,t))!==!1&&(a[m]=h||d)}),Object.defineProperties(t,a)},ho=t=>{Lt(t,(i,s)=>{if(u(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const a=t[s];if(u(a)){if(i.enumerable=!1,"writable"in i){i.writable=!1;return}i.set||(i.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},mo=(t,i)=>{const s={},a=d=>{d.forEach(m=>{s[m]=!0})};return A(t)?a(t):a(String(t).split(i)),s},go=()=>{},yo=(t,i)=>t!=null&&Number.isFinite(t=+t)?t:i;function bo(t){return!!(t&&u(t.append)&&t[f]==="FormData"&&t[l])}const wo=t=>{const i=new Array(10),s=(a,d)=>{if(y(a)){if(i.indexOf(a)>=0)return;if(B(a))return a;if(!("toJSON"in a)){i[d]=a;const m=A(a)?[]:{};return Ne(a,(h,k)=>{const N=s(h,d+1);!T(N)&&(m[k]=N)}),i[d]=void 0,m}}return a};return s(t,0)},vo=v("AsyncFunction"),Ao=t=>t&&(y(t)||u(t))&&u(t.then)&&u(t.catch),Mt=((t,i)=>t?setImmediate:i?((s,a)=>(be.addEventListener("message",({source:d,data:m})=>{d===be&&m===s&&a.length&&a.shift()()},!1),d=>{a.push(d),be.postMessage(s,"*")}))("axios@".concat(Math.random()),[]):s=>setTimeout(s))(typeof setImmediate=="function",u(be.postMessage)),To=typeof queueMicrotask<"u"?queueMicrotask.bind(be):typeof Sn<"u"&&Sn.nextTick||Mt;var w={isArray:A,isArrayBuffer:e,isBuffer:B,isFormData:D,isArrayBufferView:n,isString:r,isNumber:_,isBoolean:p,isObject:y,isPlainObject:x,isEmptyObject:C,isReadableStream:Le,isRequest:ot,isResponse:Me,isHeaders:pe,isUndefined:T,isDate:F,isFile:H,isBlob:re,isRegExp:_o,isFunction:u,isStream:Oe,isURLSearchParams:je,isTypedArray:uo,isFileList:Te,forEach:Ne,merge:rt,extend:no,trim:it,stripBOM:oo,inherits:io,toFlatObject:ro,kindOf:b,kindOfTest:v,endsWith:so,toArray:ao,forEachEntry:lo,matchAll:co,isHTMLForm:fo,hasOwnProperty:jt,hasOwnProp:jt,reduceDescriptors:Lt,freezeMethods:ho,toObjectSet:mo,toCamelCase:po,noop:go,toFiniteNumber:yo,findKey:Bt,global:be,isContextDefined:Ft,isSpecCompliantForm:bo,toJSONObject:wo,isAsyncFn:vo,isThenable:Ao,setImmediate:Mt,asap:To,isIterable:t=>t!=null&&u(t[l])};function M(t,i,s,a,d){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",i&&(this.code=i),s&&(this.config=s),a&&(this.request=a),d&&(this.response=d,this.status=d.status?d.status:null)}w.inherits(M,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:w.toJSONObject(this.config),code:this.code,status:this.status}}});const Ut=M.prototype,Dt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Dt[t]={value:t}}),Object.defineProperties(M,Dt),Object.defineProperty(Ut,"isAxiosError",{value:!0}),M.from=(t,i,s,a,d,m)=>{const h=Object.create(Ut);w.toFlatObject(t,h,function(S){return S!==Error.prototype},S=>S!=="isAxiosError");const k=t&&t.message?t.message:"Error",N=i==null&&t?t.code:i;return M.call(h,k,N,s,a,d),t&&h.cause==null&&Object.defineProperty(h,"cause",{value:t,configurable:!0}),h.name=t&&t.name||"Error",m&&Object.assign(h,m),h};var xo=null;function st(t){return w.isPlainObject(t)||w.isArray(t)}function qt(t){return w.endsWith(t,"[]")?t.slice(0,-2):t}function Ht(t,i,s){return t?t.concat(i).map(function(a,d){return a=qt(a),!s&&d?"["+a+"]":a}).join(s?".":""):i}function ko(t){return w.isArray(t)&&!t.some(st)}const So=w.toFlatObject(w,{},null,function(t){return/^is[A-Z]/.test(t)});function Ue(t,i,s){if(!w.isObject(t))throw new TypeError("target must be an object");i=i||new FormData,s=w.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,E){return!w.isUndefined(E[U])});const a=s.metaTokens,d=s.visitor||S,m=s.dots,h=s.indexes,k=(s.Blob||typeof Blob<"u"&&Blob)&&w.isSpecCompliantForm(i);if(!w.isFunction(d))throw new TypeError("visitor must be a function");function N(U){if(U===null)return"";if(w.isDate(U))return U.toISOString();if(w.isBoolean(U))return U.toString();if(!k&&w.isBlob(U))throw new M("Blob is not supported. Use a Buffer instead.");return w.isArrayBuffer(U)||w.isTypedArray(U)?k&&typeof Blob=="function"?new Blob([U]):Fi.from(U):U}function S(U,E,R){let V=U;if(U&&!R&&typeof U=="object"){if(w.endsWith(E,"{}"))E=a?E:E.slice(0,-2),U=JSON.stringify(U);else if(w.isArray(U)&&ko(U)||(w.isFileList(U)||w.endsWith(E,"[]"))&&(V=w.toArray(U)))return E=qt(E),V.forEach(function(Y,W){!(w.isUndefined(Y)||Y===null)&&i.append(h===!0?Ht([E],W,m):h===null?E:E+"[]",N(Y))}),!1}return st(U)?!0:(i.append(Ht(R,E,m),N(U)),!1)}const O=[],L=Object.assign(So,{defaultVisitor:S,convertValue:N,isVisitable:st});function q(U,E){if(!w.isUndefined(U)){if(O.indexOf(U)!==-1)throw Error("Circular reference detected in "+E.join("."));O.push(U),w.forEach(U,function(R,V){(!(w.isUndefined(R)||R===null)&&d.call(i,R,w.isString(V)?V.trim():V,E,L))===!0&&q(R,E?E.concat(V):[V])}),O.pop()}}if(!w.isObject(t))throw new TypeError("data must be an object");return q(t),i}function Vt(t){const i={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return i[s]})}function at(t,i){this._pairs=[],t&&Ue(t,this,i)}const $t=at.prototype;$t.append=function(t,i){this._pairs.push([t,i])},$t.toString=function(t){const i=t?function(s){return t.call(this,s,Vt)}:Vt;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function Io(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Gt(t,i,s){if(!i)return t;const a=s&&s.encode||Io;w.isFunction(s)&&(s={serialize:s});const d=s&&s.serialize;let m;if(d?m=d(i,s):m=w.isURLSearchParams(i)?i.toString():new at(i,s).toString(a),m){const h=t.indexOf("#");h!==-1&&(t=t.slice(0,h)),t+=(t.indexOf("?")===-1?"?":"&")+m}return t}class Eo{constructor(){this.handlers=[]}use(i,s,a){return this.handlers.push({fulfilled:i,rejected:s,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(i){this.handlers[i]&&(this.handlers[i]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(i){w.forEach(this.handlers,function(s){s!==null&&i(s)})}}var zt=Eo,Wt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Oo=typeof URLSearchParams<"u"?URLSearchParams:at,No=typeof FormData<"u"?FormData:null,Ro=typeof Blob<"u"?Blob:null,Co={isBrowser:!0,classes:{URLSearchParams:Oo,FormData:No,Blob:Ro},protocols:["http","https","file","blob","url","data"]};const ut=typeof window<"u"&&typeof document<"u",lt=typeof navigator=="object"&&navigator||void 0,Po=ut&&(!lt||["ReactNative","NativeScript","NS"].indexOf(lt.product)<0),Bo=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Fo=ut&&window.location.href||"http://localhost";var jo=Object.freeze({__proto__:null,hasBrowserEnv:ut,hasStandardBrowserWebWorkerEnv:Bo,hasStandardBrowserEnv:Po,navigator:lt,origin:Fo}),Z=oe(oe({},jo),Co);function Lo(t,i){return Ue(t,new Z.classes.URLSearchParams,oe({visitor:function(s,a,d,m){return Z.isNode&&w.isBuffer(s)?(this.append(a,s.toString("base64")),!1):m.defaultVisitor.apply(this,arguments)}},i))}function Mo(t){return w.matchAll(/\w+|\[(\w*)]/g,t).map(i=>i[0]==="[]"?"":i[1]||i[0])}function Uo(t){const i={},s=Object.keys(t);let a;const d=s.length;let m;for(a=0;a<d;a++)m=s[a],i[m]=t[m];return i}function Jt(t){function i(s,a,d,m){let h=s[m++];if(h==="__proto__")return!0;const k=Number.isFinite(+h),N=m>=s.length;return h=!h&&w.isArray(d)?d.length:h,N?(w.hasOwnProp(d,h)?d[h]=[d[h],a]:d[h]=a,!k):((!d[h]||!w.isObject(d[h]))&&(d[h]=[]),i(s,a,d[h],m)&&w.isArray(d[h])&&(d[h]=Uo(d[h])),!k)}if(w.isFormData(t)&&w.isFunction(t.entries)){const s={};return w.forEachEntry(t,(a,d)=>{i(Mo(a),d,s,0)}),s}return null}function Do(t,i,s){if(w.isString(t))try{return(i||JSON.parse)(t),w.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(s||JSON.stringify)(t)}const ct={transitional:Wt,adapter:["xhr","http","fetch"],transformRequest:[function(t,i){const s=i.getContentType()||"",a=s.indexOf("application/json")>-1,d=w.isObject(t);if(d&&w.isHTMLForm(t)&&(t=new FormData(t)),w.isFormData(t))return a?JSON.stringify(Jt(t)):t;if(w.isArrayBuffer(t)||w.isBuffer(t)||w.isStream(t)||w.isFile(t)||w.isBlob(t)||w.isReadableStream(t))return t;if(w.isArrayBufferView(t))return t.buffer;if(w.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let m;if(d){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Lo(t,this.formSerializer).toString();if((m=w.isFileList(t))||s.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Ue(m?{"files[]":t}:t,h&&new h,this.formSerializer)}}return d||a?(i.setContentType("application/json",!1),Do(t)):t}],transformResponse:[function(t){const i=this.transitional||ct.transitional,s=i&&i.forcedJSONParsing,a=this.responseType==="json";if(w.isResponse(t)||w.isReadableStream(t))return t;if(t&&w.isString(t)&&(s&&!this.responseType||a)){const d=!(i&&i.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(m){if(d)throw m.name==="SyntaxError"?M.from(m,M.ERR_BAD_RESPONSE,this,null,this.response):m}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Z.classes.FormData,Blob:Z.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};w.forEach(["delete","get","head","post","put","patch"],t=>{ct.headers[t]={}});var dt=ct;const qo=w.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Ho=t=>{const i={};let s,a,d;return t&&t.split("\n").forEach(function(m){d=m.indexOf(":"),s=m.substring(0,d).trim().toLowerCase(),a=m.substring(d+1).trim(),!(!s||i[s]&&qo[s])&&(s==="set-cookie"?i[s]?i[s].push(a):i[s]=[a]:i[s]=i[s]?i[s]+", "+a:a)}),i};const Xt=Symbol("internals");function Re(t){return t&&String(t).trim().toLowerCase()}function De(t){return t===!1||t==null?t:w.isArray(t)?t.map(De):String(t)}function Vo(t){const i=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(t);)i[a[1]]=a[2];return i}const $o=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ft(t,i,s,a,d){if(w.isFunction(a))return a.call(this,i,s);if(d&&(i=s),!!w.isString(i)){if(w.isString(a))return i.indexOf(a)!==-1;if(w.isRegExp(a))return a.test(i)}}function Go(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(i,s,a)=>s.toUpperCase()+a)}function zo(t,i){const s=w.toCamelCase(" "+i);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+s,{value:function(d,m,h){return this[a].call(this,i,d,m,h)},configurable:!0})})}class qe{constructor(i){i&&this.set(i)}set(i,s,a){const d=this;function m(k,N,S){const O=Re(N);if(!O)throw new Error("header name must be a non-empty string");const L=w.findKey(d,O);(!L||d[L]===void 0||S===!0||S===void 0&&d[L]!==!1)&&(d[L||N]=De(k))}const h=(k,N)=>w.forEach(k,(S,O)=>m(S,O,N));if(w.isPlainObject(i)||i instanceof this.constructor)h(i,s);else if(w.isString(i)&&(i=i.trim())&&!$o(i))h(Ho(i),s);else if(w.isObject(i)&&w.isIterable(i)){let k={},N,S;for(const O of i){if(!w.isArray(O))throw TypeError("Object iterator must return a key-value pair");k[S=O[0]]=(N=k[S])?w.isArray(N)?[...N,O[1]]:[N,O[1]]:O[1]}h(k,s)}else i!=null&&m(s,i,a);return this}get(i,s){if(i=Re(i),i){const a=w.findKey(this,i);if(a){const d=this[a];if(!s)return d;if(s===!0)return Vo(d);if(w.isFunction(s))return s.call(this,d,a);if(w.isRegExp(s))return s.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(i,s){if(i=Re(i),i){const a=w.findKey(this,i);return!!(a&&this[a]!==void 0&&(!s||ft(this,this[a],a,s)))}return!1}delete(i,s){const a=this;let d=!1;function m(h){if(h=Re(h),h){const k=w.findKey(a,h);k&&(!s||ft(a,a[k],k,s))&&(delete a[k],d=!0)}}return w.isArray(i)?i.forEach(m):m(i),d}clear(i){const s=Object.keys(this);let a=s.length,d=!1;for(;a--;){const m=s[a];(!i||ft(this,this[m],m,i,!0))&&(delete this[m],d=!0)}return d}normalize(i){const s=this,a={};return w.forEach(this,(d,m)=>{const h=w.findKey(a,m);if(h){s[h]=De(d),delete s[m];return}const k=i?Go(m):String(m).trim();k!==m&&delete s[m],s[k]=De(d),a[k]=!0}),this}concat(...i){return this.constructor.concat(this,...i)}toJSON(i){const s=Object.create(null);return w.forEach(this,(a,d)=>{a!=null&&a!==!1&&(s[d]=i&&w.isArray(a)?a.join(", "):a)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([i,s])=>i+": "+s).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(i){return i instanceof this?i:new this(i)}static concat(i,...s){const a=new this(i);return s.forEach(d=>a.set(d)),a}static accessor(i){const s=(this[Xt]=this[Xt]={accessors:{}}).accessors,a=this.prototype;function d(m){const h=Re(m);s[h]||(zo(a,m),s[h]=!0)}return w.isArray(i)?i.forEach(d):d(i),this}}qe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),w.reduceDescriptors(qe.prototype,({value:t},i)=>{let s=i[0].toUpperCase()+i.slice(1);return{get:()=>t,set(a){this[s]=a}}}),w.freezeMethods(qe);var ne=qe;function pt(t,i){const s=this||dt,a=i||s,d=ne.from(a.headers);let m=a.data;return w.forEach(t,function(h){m=h.call(s,m,d.normalize(),i?i.status:void 0)}),d.normalize(),m}function Kt(t){return!!(t&&t.__CANCEL__)}function xe(t,i,s){M.call(this,t!=null?t:"canceled",M.ERR_CANCELED,i,s),this.name="CanceledError"}w.inherits(xe,M,{__CANCEL__:!0});function Qt(t,i,s){const a=s.config.validateStatus;!s.status||!a||a(s.status)?t(s):i(new M("Request failed with status code "+s.status,[M.ERR_BAD_REQUEST,M.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Wo(t){const i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return i&&i[1]||""}function Jo(t,i){t=t||10;const s=new Array(t),a=new Array(t);let d=0,m=0,h;return i=i!==void 0?i:1e3,function(k){const N=Date.now(),S=a[m];h||(h=N),s[d]=k,a[d]=N;let O=m,L=0;for(;O!==d;)L+=s[O++],O=O%t;if(d=(d+1)%t,d===m&&(m=(m+1)%t),N-h<i)return;const q=S&&N-S;return q?Math.round(L*1e3/q):void 0}}function Xo(t,i){let s=0,a=1e3/i,d,m;const h=(k,N=Date.now())=>{s=N,d=null,m&&(clearTimeout(m),m=null),t(...k)};return[(...k)=>{const N=Date.now(),S=N-s;S>=a?h(k,N):(d=k,m||(m=setTimeout(()=>{m=null,h(d)},a-S)))},()=>d&&h(d)]}const He=(t,i,s=3)=>{let a=0;const d=Jo(50,250);return Xo(m=>{const h=m.loaded,k=m.lengthComputable?m.total:void 0,N=h-a,S=d(N),O=h<=k;a=h;const L={loaded:h,total:k,progress:k?h/k:void 0,bytes:N,rate:S||void 0,estimated:S&&k&&O?(k-h)/S:void 0,event:m,lengthComputable:k!=null,[i?"download":"upload"]:!0};t(L)},s)},Zt=(t,i)=>{const s=t!=null;return[a=>i[0]({lengthComputable:s,total:t,loaded:a}),i[1]]},Yt=t=>(...i)=>w.asap(()=>t(...i));var Ko=Z.hasStandardBrowserEnv?((t,i)=>s=>(s=new URL(s,Z.origin),t.protocol===s.protocol&&t.host===s.host&&(i||t.port===s.port)))(new URL(Z.origin),Z.navigator&&/(msie|trident)/i.test(Z.navigator.userAgent)):()=>!0,Qo=Z.hasStandardBrowserEnv?{write(t,i,s,a,d,m){const h=[t+"="+encodeURIComponent(i)];w.isNumber(s)&&h.push("expires="+new Date(s).toGMTString()),w.isString(a)&&h.push("path="+a),w.isString(d)&&h.push("domain="+d),m===!0&&h.push("secure"),document.cookie=h.join("; ")},read(t){const i=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Zo(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Yo(t,i){return i?t.replace(/\/?\/$/,"")+"/"+i.replace(/^\/+/,""):t}function en(t,i,s){let a=!Zo(i);return t&&(a||s==!1)?Yo(t,i):i}const tn=t=>t instanceof ne?oe({},t):t;function we(t,i){i=i||{};const s={};function a(S,O,L,q){return w.isPlainObject(S)&&w.isPlainObject(O)?w.merge.call({caseless:q},S,O):w.isPlainObject(O)?w.merge({},O):w.isArray(O)?O.slice():O}function d(S,O,L,q){if(w.isUndefined(O)){if(!w.isUndefined(S))return a(void 0,S,L,q)}else return a(S,O,L,q)}function m(S,O){if(!w.isUndefined(O))return a(void 0,O)}function h(S,O){if(w.isUndefined(O)){if(!w.isUndefined(S))return a(void 0,S)}else return a(void 0,O)}function k(S,O,L){if(L in i)return a(S,O);if(L in t)return a(void 0,S)}const N={url:m,method:m,data:m,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:k,headers:(S,O,L)=>d(tn(S),tn(O),L,!0)};return w.forEach(Object.keys(oe(oe({},t),i)),function(S){const O=N[S]||d,L=O(t[S],i[S],S);w.isUndefined(L)&&O!==k||(s[S]=L)}),s}var nn=t=>{const i=we({},t);let{data:s,withXSRFToken:a,xsrfHeaderName:d,xsrfCookieName:m,headers:h,auth:k}=i;if(i.headers=h=ne.from(h),i.url=Gt(en(i.baseURL,i.url,i.allowAbsoluteUrls),t.params,t.paramsSerializer),k&&h.set("Authorization","Basic "+btoa((k.username||"")+":"+(k.password?unescape(encodeURIComponent(k.password)):""))),w.isFormData(s)){if(Z.hasStandardBrowserEnv||Z.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(w.isFunction(s.getHeaders)){const N=s.getHeaders(),S=["content-type","content-length"];Object.entries(N).forEach(([O,L])=>{S.includes(O.toLowerCase())&&h.set(O,L)})}}if(Z.hasStandardBrowserEnv&&(a&&w.isFunction(a)&&(a=a(i)),a||a!==!1&&Ko(i.url))){const N=d&&m&&Qo.read(m);N&&h.set(d,N)}return i},ei=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(i,s){const a=nn(t);let d=a.data;const m=ne.from(a.headers).normalize();let{responseType:h,onUploadProgress:k,onDownloadProgress:N}=a,S,O,L,q,U;function E(){q&&q(),U&&U(),a.cancelToken&&a.cancelToken.unsubscribe(S),a.signal&&a.signal.removeEventListener("abort",S)}let R=new XMLHttpRequest;R.open(a.method.toUpperCase(),a.url,!0),R.timeout=a.timeout;function V(){if(!R)return;const W=ne.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),ae={data:!h||h==="text"||h==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:W,config:t,request:R};Qt(function(_e){i(_e),E()},function(_e){s(_e),E()},ae),R=null}"onloadend"in R?R.onloadend=V:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(V)},R.onabort=function(){R&&(s(new M("Request aborted",M.ECONNABORTED,t,R)),R=null)},R.onerror=function(W){const ae=W&&W.message?W.message:"Network Error",_e=new M(ae,M.ERR_NETWORK,t,R);_e.event=W||null,s(_e),R=null},R.ontimeout=function(){let W=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const ae=a.transitional||Wt;a.timeoutErrorMessage&&(W=a.timeoutErrorMessage),s(new M(W,ae.clarifyTimeoutError?M.ETIMEDOUT:M.ECONNABORTED,t,R)),R=null},d===void 0&&m.setContentType(null),"setRequestHeader"in R&&w.forEach(m.toJSON(),function(W,ae){R.setRequestHeader(ae,W)}),w.isUndefined(a.withCredentials)||(R.withCredentials=!!a.withCredentials),h&&h!=="json"&&(R.responseType=a.responseType),N&&([L,U]=He(N,!0),R.addEventListener("progress",L)),k&&R.upload&&([O,q]=He(k),R.upload.addEventListener("progress",O),R.upload.addEventListener("loadend",q)),(a.cancelToken||a.signal)&&(S=W=>{R&&(s(!W||W.type?new xe(null,t,R):W),R.abort(),R=null)},a.cancelToken&&a.cancelToken.subscribe(S),a.signal&&(a.signal.aborted?S():a.signal.addEventListener("abort",S)));const Y=Wo(a.url);if(Y&&Z.protocols.indexOf(Y)===-1){s(new M("Unsupported protocol "+Y+":",M.ERR_BAD_REQUEST,t));return}R.send(d||null)})},ti=(t,i)=>{const{length:s}=t=t?t.filter(Boolean):[];if(i||s){let a=new AbortController,d;const m=function(S){if(!d){d=!0,k();const O=S instanceof Error?S:this.reason;a.abort(O instanceof M?O:new xe(O instanceof Error?O.message:O))}};let h=i&&setTimeout(()=>{h=null,m(new M("timeout ".concat(i," of ms exceeded"),M.ETIMEDOUT))},i);const k=()=>{t&&(h&&clearTimeout(h),h=null,t.forEach(S=>{S.unsubscribe?S.unsubscribe(m):S.removeEventListener("abort",m)}),t=null)};t.forEach(S=>S.addEventListener("abort",m));const{signal:N}=a;return N.unsubscribe=()=>w.asap(k),N}};const ni=function*(t,i){let s=t.byteLength;if(s<i){yield t;return}let a=0,d;for(;a<s;)d=a+i,yield t.slice(a,d),a=d},oi=function(t,i){return At(this,null,function*(){try{for(var s=xn(ii(t)),a,d,m;a=!(d=yield new Ae(s.next())).done;a=!1){const h=d.value;yield*Tt(ni(h,i))}}catch(d){m=[d]}finally{try{a&&(d=s.return)&&(yield new Ae(d.call(s)))}finally{if(m)throw m[0]}}})},ii=function(t){return At(this,null,function*(){if(t[Symbol.asyncIterator]){yield*Tt(t);return}const i=t.getReader();try{for(;;){const{done:s,value:a}=yield new Ae(i.read());if(s)break;yield a}}finally{yield new Ae(i.cancel())}})},on=(t,i,s,a)=>{const d=oi(t,i);let m=0,h,k=N=>{h||(h=!0,a&&a(N))};return new ReadableStream({async pull(N){try{const{done:S,value:O}=await d.next();if(S){k(),N.close();return}let L=O.byteLength;if(s){let q=m+=L;s(q)}N.enqueue(new Uint8Array(O))}catch(S){throw k(S),S}},cancel(N){return k(N),d.return()}},{highWaterMark:2})},rn=64*1024,{isFunction:Ve}=w,ri=(({Request:t,Response:i})=>({Request:t,Response:i}))(w.global),{ReadableStream:sn,TextEncoder:an}=w.global,un=(t,...i)=>{try{return!!t(...i)}catch(s){return!1}},si=t=>{t=w.merge.call({skipUndefined:!0},ri,t);const{fetch:i,Request:s,Response:a}=t,d=i?Ve(i):typeof fetch=="function",m=Ve(s),h=Ve(a);if(!d)return!1;const k=d&&Ve(sn),N=d&&(typeof an=="function"?(E=>R=>E.encode(R))(new an):async E=>new Uint8Array(await new s(E).arrayBuffer())),S=m&&k&&un(()=>{let E=!1;const R=new s(Z.origin,{body:new sn,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type");return E&&!R}),O=h&&k&&un(()=>w.isReadableStream(new a("").body)),L={stream:O&&(E=>E.body)};d&&["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!L[E]&&(L[E]=(R,V)=>{let Y=R&&R[E];if(Y)return Y.call(R);throw new M("Response type '".concat(E,"' is not supported"),M.ERR_NOT_SUPPORT,V)})});const q=async E=>{if(E==null)return 0;if(w.isBlob(E))return E.size;if(w.isSpecCompliantForm(E))return(await new s(Z.origin,{method:"POST",body:E}).arrayBuffer()).byteLength;if(w.isArrayBufferView(E)||w.isArrayBuffer(E))return E.byteLength;if(w.isURLSearchParams(E)&&(E=E+""),w.isString(E))return(await N(E)).byteLength},U=async(E,R)=>{const V=w.toFiniteNumber(E.getContentLength());return V!=null?V:q(R)};return async E=>{let{url:R,method:V,data:Y,signal:W,cancelToken:ae,timeout:_e,onDownloadProgress:yt,onUploadProgress:mn,responseType:he,headers:bt,withCredentials:Je="same-origin",fetchOptions:gn}=nn(E),yn=i||fetch;he=he?(he+"").toLowerCase():"text";let Xe=ti([W,ae&&ae.toAbortSignal()],_e),Ce=null;const ve=Xe&&Xe.unsubscribe&&(()=>{Xe.unsubscribe()});let bn;try{if(mn&&S&&V!=="get"&&V!=="head"&&(bn=await U(bt,Y))!==0){let ge=new s(R,{method:"POST",body:Y,duplex:"half"}),ke;if(w.isFormData(Y)&&(ke=ge.headers.get("content-type"))&&bt.setContentType(ke),ge.body){const[wt,Ke]=Zt(bn,He(Yt(mn)));Y=on(ge.body,rn,wt,Ke)}}w.isString(Je)||(Je=Je?"include":"omit");const ue=m&&"credentials"in s.prototype,wn=Pe(oe({},gn),{signal:Xe,method:V.toUpperCase(),headers:bt.normalize().toJSON(),body:Y,duplex:"half",credentials:ue?Je:void 0});Ce=m&&new s(R,wn);let me=await(m?yn(Ce,gn):yn(R,wn));const vn=O&&(he==="stream"||he==="response");if(O&&(yt||vn&&ve)){const ge={};["status","statusText","headers"].forEach(An=>{ge[An]=me[An]});const ke=w.toFiniteNumber(me.headers.get("content-length")),[wt,Ke]=yt&&Zt(ke,He(Yt(yt),!0))||[];me=new a(on(me.body,rn,wt,()=>{Ke&&Ke(),ve&&ve()}),ge)}he=he||"text";let _i=await L[w.findKey(L,he)||"text"](me,E);return!vn&&ve&&ve(),await new Promise((ge,ke)=>{Qt(ge,ke,{data:_i,headers:ne.from(me.headers),status:me.status,statusText:me.statusText,config:E,request:Ce})})}catch(ue){throw ve&&ve(),ue&&ue.name==="TypeError"&&/Load failed|fetch/i.test(ue.message)?Object.assign(new M("Network Error",M.ERR_NETWORK,E,Ce),{cause:ue.cause||ue}):M.from(ue,ue&&ue.code,E,Ce)}}},ai=new Map,ln=t=>{let i=t?t.env:{};const{fetch:s,Request:a,Response:d}=i,m=[a,d,s];let h=m.length,k=h,N,S,O=ai;for(;k--;)N=m[k],S=O.get(N),S===void 0&&O.set(N,S=k?new Map:si(i)),O=S;return S};ln();const _t={http:xo,xhr:ei,fetch:{get:ln}};w.forEach(_t,(t,i)=>{if(t){try{Object.defineProperty(t,"name",{value:i})}catch(s){}Object.defineProperty(t,"adapterName",{value:i})}});const cn=t=>"- ".concat(t),ui=t=>w.isFunction(t)||t===null||t===!1;var dn={getAdapter:(t,i)=>{t=w.isArray(t)?t:[t];const{length:s}=t;let a,d;const m={};for(let h=0;h<s;h++){a=t[h];let k;if(d=a,!ui(a)&&(d=_t[(k=String(a)).toLowerCase()],d===void 0))throw new M("Unknown adapter '".concat(k,"'"));if(d&&(w.isFunction(d)||(d=d.get(i))))break;m[k||"#"+h]=d}if(!d){const h=Object.entries(m).map(([N,S])=>"adapter ".concat(N," ")+(S===!1?"is not supported by the environment":"is not available in the build"));let k=s?h.length>1?"since :\n"+h.map(cn).join("\n"):" "+cn(h[0]):"as no adapter specified";throw new M("There is no suitable adapter to dispatch the request "+k,"ERR_NOT_SUPPORT")}return d},adapters:_t};function ht(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new xe(null,t)}function fn(t){return ht(t),t.headers=ne.from(t.headers),t.data=pt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),dn.getAdapter(t.adapter||dt.adapter,t)(t).then(function(i){return ht(t),i.data=pt.call(t,t.transformResponse,i),i.headers=ne.from(i.headers),i},function(i){return Kt(i)||(ht(t),i&&i.response&&(i.response.data=pt.call(t,t.transformResponse,i.response),i.response.headers=ne.from(i.response.headers))),Promise.reject(i)})}const pn="1.12.2",$e={};["object","boolean","number","function","string","symbol"].forEach((t,i)=>{$e[t]=function(s){return typeof s===t||"a"+(i<1?"n ":" ")+t}});const _n={};$e.transitional=function(t,i,s){function a(d,m){return"[Axios v"+pn+"] Transitional option '"+d+"'"+m+(s?". "+s:"")}return(d,m,h)=>{if(t===!1)throw new M(a(m," has been removed"+(i?" in "+i:"")),M.ERR_DEPRECATED);return i&&!_n[m]&&(_n[m]=!0,console.warn(a(m," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(d,m,h):!0}},$e.spelling=function(t){return(i,s)=>(console.warn("".concat(s," is likely a misspelling of ").concat(t)),!0)};function li(t,i,s){if(typeof t!="object")throw new M("options must be an object",M.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let d=a.length;for(;d-- >0;){const m=a[d],h=i[m];if(h){const k=t[m],N=k===void 0||h(k,m,t);if(N!==!0)throw new M("option "+m+" must be "+N,M.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new M("Unknown option "+m,M.ERR_BAD_OPTION)}}var Ge={assertOptions:li,validators:$e};const se=Ge.validators;class ze{constructor(i){this.defaults=i||{},this.interceptors={request:new zt,response:new zt}}async request(i,s){try{return await this._request(i,s)}catch(a){if(a instanceof Error){let d={};Error.captureStackTrace?Error.captureStackTrace(d):d=new Error;const m=d.stack?d.stack.replace(/^.+\n/,""):"";try{a.stack?m&&!String(a.stack).endsWith(m.replace(/^.+\n.+\n/,""))&&(a.stack+="\n"+m):a.stack=m}catch(h){}}throw a}}_request(i,s){typeof i=="string"?(s=s||{},s.url=i):s=i||{},s=we(this.defaults,s);const{transitional:a,paramsSerializer:d,headers:m}=s;a!==void 0&&Ge.assertOptions(a,{silentJSONParsing:se.transitional(se.boolean),forcedJSONParsing:se.transitional(se.boolean),clarifyTimeoutError:se.transitional(se.boolean)},!1),d!=null&&(w.isFunction(d)?s.paramsSerializer={serialize:d}:Ge.assertOptions(d,{encode:se.function,serialize:se.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Ge.assertOptions(s,{baseUrl:se.spelling("baseURL"),withXsrfToken:se.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let h=m&&w.merge(m.common,m[s.method]);m&&w.forEach(["delete","get","head","post","put","patch","common"],E=>{delete m[E]}),s.headers=ne.concat(h,m);const k=[];let N=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(s)===!1||(N=N&&E.synchronous,k.unshift(E.fulfilled,E.rejected))});const S=[];this.interceptors.response.forEach(function(E){S.push(E.fulfilled,E.rejected)});let O,L=0,q;if(!N){const E=[fn.bind(this),void 0];for(E.unshift(...k),E.push(...S),q=E.length,O=Promise.resolve(s);L<q;)O=O.then(E[L++],E[L++]);return O}q=k.length;let U=s;for(;L<q;){const E=k[L++],R=k[L++];try{U=E(U)}catch(V){R.call(this,V);break}}try{O=fn.call(this,U)}catch(E){return Promise.reject(E)}for(L=0,q=S.length;L<q;)O=O.then(S[L++],S[L++]);return O}getUri(i){i=we(this.defaults,i);const s=en(i.baseURL,i.url,i.allowAbsoluteUrls);return Gt(s,i.params,i.paramsSerializer)}}w.forEach(["delete","get","head","options"],function(t){ze.prototype[t]=function(i,s){return this.request(we(s||{},{method:t,url:i,data:(s||{}).data}))}}),w.forEach(["post","put","patch"],function(t){function i(s){return function(a,d,m){return this.request(we(m||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:d}))}}ze.prototype[t]=i(),ze.prototype[t+"Form"]=i(!0)});var We=ze;class mt{constructor(i){if(typeof i!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(d){s=d});const a=this;this.promise.then(d=>{if(!a._listeners)return;let m=a._listeners.length;for(;m-- >0;)a._listeners[m](d);a._listeners=null}),this.promise.then=d=>{let m;const h=new Promise(k=>{a.subscribe(k),m=k}).then(d);return h.cancel=function(){a.unsubscribe(m)},h},i(function(d,m,h){a.reason||(a.reason=new xe(d,m,h),s(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]}unsubscribe(i){if(!this._listeners)return;const s=this._listeners.indexOf(i);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const i=new AbortController,s=a=>{i.abort(a)};return this.subscribe(s),i.signal.unsubscribe=()=>this.unsubscribe(s),i.signal}static source(){let i;return{token:new mt(function(s){i=s}),cancel:i}}}var ci=mt;function di(t){return function(i){return t.apply(null,i)}}function fi(t){return w.isObject(t)&&t.isAxiosError===!0}const gt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gt).forEach(([t,i])=>{gt[i]=t});var pi=gt;function hn(t){const i=new We(t),s=c(We.prototype.request,i);return w.extend(s,We.prototype,i,{allOwnKeys:!0}),w.extend(s,i,null,{allOwnKeys:!0}),s.create=function(a){return hn(we(t,a))},s}const z=hn(dt);return z.Axios=We,z.CanceledError=xe,z.CancelToken=ci,z.isCancel=Kt,z.VERSION=pn,z.toFormData=Ue,z.AxiosError=M,z.Cancel=z.CanceledError,z.all=function(t){return Promise.all(t)},z.spread=di,z.isAxiosError=fi,z.mergeConfig=we,z.AxiosHeaders=ne,z.formToJSON=t=>Jt(w.isHTMLForm(t)?new FormData(t):t),z.getAdapter=dn.getAdapter,z.HttpStatusCode=pi,z.default=z,It=z,It}var Vn={},$n;function Tr(){return $n||($n=1,function(c){Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});const g=(n,r)=>A(n,"",r),o=n=>"/remote.php/"+n,l=(n,r)=>{var u;return((u=r==null?void 0:r.baseURL)!=null?u:T())+o(n)},f=(n,r,u)=>{var _;const y=Object.assign({ocsVersion:2},u||{}).ocsVersion===1?1:2;return((_=u==null?void 0:u.baseURL)!=null?_:T())+"/ocs/v"+y+".php"+b(n,r,u)},b=(n,r,u)=>{const _=Object.assign({escape:!0},u||{}),y=function(p,x){return x=x||{},p.replace(/{([^{}]*)}/g,function(C,F){const H=x[F];return _.escape?encodeURIComponent(typeof H=="string"||typeof H=="number"?H.toString():C):typeof H=="string"||typeof H=="number"?H.toString():C})};return n.charAt(0)!=="/"&&(n="/"+n),y(n,r||{})},v=(n,r,u)=>{var _,y,p;const x=Object.assign({noRewrite:!1},u||{}),C=(_=u==null?void 0:u.baseURL)!=null?_:B();return((p=(y=window==null?void 0:window.OC)==null?void 0:y.config)==null?void 0:p.modRewriteWorking)===!0&&!x.noRewrite?C+b(n,r,u):C+"/index.php"+b(n,r,u)},I=(n,r)=>r.includes(".")?A(n,"img",r):A(n,"img","".concat(r,".svg")),A=(n,r,u)=>{var _,y,p;const x=(p=(y=(_=window==null?void 0:window.OC)==null?void 0:_.coreApps)==null?void 0:y.includes(n))!=null?p:!1,C=u.slice(-3)==="php";let F=B();return C&&!x?(F+="/index.php/apps/".concat(n),r&&(F+="/".concat(encodeURI(r))),u!=="index.php"&&(F+="/".concat(u))):!C&&!x?(F=e(n),r&&(F+="/".concat(r,"/")),F.at(-1)!=="/"&&(F+="/"),F+=u):((n==="settings"||n==="core"||n==="search")&&r==="ajax"&&(F+="/index.php"),n&&(F+="/".concat(n)),r&&(F+="/".concat(r)),F+="/".concat(u)),F},T=()=>window.location.protocol+"//"+window.location.host+B();function B(){let n=window._oc_webroot;if(typeof n>"u"){n=location.pathname;const r=n.indexOf("/index.php/");if(r!==-1)n=n.slice(0,r);else{const u=n.indexOf("/",1);n=n.slice(0,u>0?u:void 0)}}return n}function e(n){var r,u;return(u=((r=window._oc_appswebroots)!=null?r:{})[n])!=null?u:""}c.generateFilePath=A,c.generateOcsUrl=f,c.generateRemoteUrl=l,c.generateUrl=v,c.getAppRootUrl=e,c.getBaseUrl=T,c.getRootUrl=B,c.imagePath=I,c.linkTo=g}(Vn)),Vn}var Gn;function xr(){return Gn||(Gn=1,function(c){var n;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const g=vr(),o=Ar(),l=Tr(),f=(r=>r&&r.__esModule?r:{default:r})(o),b=f.default.create({headers:{requesttoken:(n=g.getRequestToken())!=null?n:"","X-Requested-With":"XMLHttpRequest"}});g.onRequestTokenUpdate(r=>{b.defaults.headers.requesttoken=r});const v=Object.assign(b,{CancelToken:f.default.CancelToken,isCancel:f.default.isCancel}),I=Symbol("csrf-retry");function A(r){return async u=>{var C;if(!o.isAxiosError(u))throw u;const{config:_,response:y,request:p}=u,x=p==null?void 0:p.responseURL;if(_&&!_[I]&&(y==null?void 0:y.status)===412&&((C=y==null?void 0:y.data)==null?void 0:C.message)==="CSRF check failed"){console.warn("Request to ".concat(x," failed because of a CSRF mismatch. Fetching a new token"));const{data:{token:F}}=await r.get(l.generateUrl("/csrftoken"));return console.debug("New request token ".concat(F," fetched")),r.defaults.headers.requesttoken=F,r(Pe(oe({},_),{headers:Pe(oe({},_.headers),{requesttoken:F}),[I]:!0}))}throw u}}const T=Symbol("retryDelay");function B(r){return async u=>{if(!o.isAxiosError(u))throw u;const{config:_,response:y,request:p}=u,x=p==null?void 0:p.responseURL,C=y==null?void 0:y.status,F=y==null?void 0:y.headers;let H=typeof(_==null?void 0:_[T])=="number"?_==null?void 0:_[T]:1;if(C===503&&(F==null?void 0:F["x-nextcloud-maintenance-mode"])==="1"&&(_!=null&&_.retryIfMaintenanceMode)){if(H*=2,H>32)throw console.error("Retry delay exceeded one minute, giving up.",{responseURL:x}),u;return console.warn("Request to ".concat(x," failed because of maintenance mode. Retrying in ").concat(H,"s")),await new Promise(re=>{setTimeout(re,H*1e3)}),r(Pe(oe({},_),{[T]:H}))}throw u}}async function e(r){var u;if(o.isAxiosError(r)){const{config:_,response:y,request:p}=r,x=p==null?void 0:p.responseURL;(y==null?void 0:y.status)===401&&((u=y==null?void 0:y.data)==null?void 0:u.message)==="Current user is not logged in"&&(_!=null&&_.reloadExpiredSession)&&(window!=null&&window.location)&&(console.error("Request to ".concat(x," failed because the user session expired. Reloading the page …")),window.location.reload())}throw r}v.interceptors.response.use(r=>r,A(v)),v.interceptors.response.use(r=>r,B(v)),v.interceptors.response.use(r=>r,e),Object.defineProperty(c,"isAxiosError",{enumerable:!0,get:()=>o.isAxiosError}),Object.defineProperty(c,"isCancel",{enumerable:!0,get:()=>o.isCancel}),c.default=v}(Ln)),Ln}var zn;function kr(){if(zn)return ce;zn=1;var c=ce&&ce.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(ce,"__esModule",{value:!0}),ce.listen=ce.getSupportedTypes=void 0;const g=br(),o=c(xr()),l=Zn();function f(){const A=(0,g.getCapabilities)();return A.notify_push?A.notify_push.type:[]}ce.getSupportedTypes=f;function b(A,T,B={}){return v(B),window._notify_push_listeners[A]||(window._notify_push_listeners[A]=[]),window._notify_push_listeners[A].push(T),window._notify_push_ws!==null&&typeof window._notify_push_ws=="object"?window._notify_push_ws.send("listen "+A):I(B),window._notify_push_available}ce.listen=b;function v(A={}){typeof window._notify_push_listeners>"u"&&(window._notify_push_listeners={},window._notify_push_ws=null,window._notify_push_online=!0,window._notify_push_available=!1,window._notify_push_error_count=0,(0,l.subscribe)("networkOffline",()=>{window._notify_push_online=!1,window._notify_push_ws=null}),(0,l.subscribe)("networkOnline",()=>{window._notify_push_error_count=0,window._notify_push_online=!0,I(A)}))}async function I(A={}){if(window._notify_push_ws)return!0;window._notify_push_ws=!0;const T=(0,g.getCapabilities)();if(!T.notify_push)return window._notify_push_available=!1,window._notify_push_ws=null,!1;window._notify_push_available=!0;let B;return A.credentials||(B=(await o.default.post(T.notify_push.endpoints.pre_auth)).data),window._notify_push_ws=new WebSocket(T.notify_push.endpoints.websocket),window._notify_push_ws.onopen=()=>{if(typeof window._notify_push_ws=="object"&&window._notify_push_ws){B?(window._notify_push_ws.send(""),window._notify_push_ws.send(B)):A.credentials&&(window._notify_push_ws.send(A.credentials.username),window._notify_push_ws.send(A.credentials.password));for(let e in window._notify_push_listeners)window._notify_push_ws.send("listen "+e)}},window._notify_push_ws.onmessage=e=>{if(e.data==="authenticated")window._notify_push_error_count=0;else{const n=e.data.indexOf(" ");let[r,u]=n>0?[e.data.slice(0,n),e.data.slice(n+1)]:[e.data,null];if(u&&(u=JSON.parse(u)),window._notify_push_listeners[r])for(let _ of window._notify_push_listeners[r])_(r,u)}},window._notify_push_ws.onerror=window._notify_push_ws.onclose=()=>{window._notify_push_ws=null,window._notify_push_error_count+=1,setTimeout(()=>{window._notify_push_online&&I(A)},1e3*window._notify_push_error_count)},!0}return ce}var Sr=kr();const Ir={name:"BellOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Er=["aria-hidden","aria-label"],Or=["fill","width","height"],Nr={d:"M10 21H14C14 22.1 13.1 23 12 23S10 22.1 10 21M21 19V20H3V19L5 17V11C5 7.9 7 5.2 10 4.3V4C10 2.9 10.9 2 12 2S14 2.9 14 4V4.3C17 5.2 19 7.9 19 11V17L21 19M17 11C17 8.2 14.8 6 12 6S7 8.2 7 11V18H17V11Z"},Rr={key:0};function Cr(c,g,o,l,f,b){return P(),j("span",Fe(c.$attrs,{"aria-hidden":o.title?null:"true","aria-label":o.title,class:"material-design-icon bell-outline-icon",role:"img",onClick:g[0]||(g[0]=v=>c.$emit("click",v))}),[(P(),j("svg",{fill:o.fillColor,class:"material-design-icon__svg",width:o.size,height:o.size,viewBox:"0 0 24 24"},[X("path",Nr,[o.title?(P(),j("title",Rr,$(o.title),1)):G("",!0)])],8,Or))],16,Er)}const Pr=fe(Ir,[["render",Cr]]),Br={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Fr=["aria-hidden","aria-label"],jr=["fill","width","height"],Lr={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},Mr={key:0};function Ur(c,g,o,l,f,b){return P(),j("span",Fe(c.$attrs,{"aria-hidden":o.title?null:"true","aria-label":o.title,class:"material-design-icon close-icon",role:"img",onClick:g[0]||(g[0]=v=>c.$emit("click",v))}),[(P(),j("svg",{fill:o.fillColor,class:"material-design-icon__svg",width:o.size,height:o.size,viewBox:"0 0 24 24"},[X("path",Lr,[o.title?(P(),j("title",Mr,$(o.title),1)):G("",!0)])],8,jr))],16,Fr)}const Yn=fe(Br,[["render",Ur]]),Dr={name:"MessageOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},qr=["aria-hidden","aria-label"],Hr=["fill","width","height"],Vr={d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2M20 16H5.2L4 17.2V4H20V16Z"},$r={key:0};function Gr(c,g,o,l,f,b){return P(),j("span",Fe(c.$attrs,{"aria-hidden":o.title?null:"true","aria-label":o.title,class:"material-design-icon message-outline-icon",role:"img",onClick:g[0]||(g[0]=v=>c.$emit("click",v))}),[(P(),j("svg",{fill:o.fillColor,class:"material-design-icon__svg",width:o.size,height:o.size,viewBox:"0 0 24 24"},[X("path",Vr,[o.title?(P(),j("title",$r,$(o.title),1)):G("",!0)])],8,Hr))],16,qr)}const eo=fe(Dr,[["render",Gr]]),zr={name:"BellIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Wr=["aria-hidden","aria-label"],Jr=["fill","width","height"],Xr={d:"M21,19V20H3V19L5,17V11C5,7.9 7.03,5.17 10,4.29C10,4.19 10,4.1 10,4A2,2 0 0,1 12,2A2,2 0 0,1 14,4C14,4.1 14,4.19 14,4.29C16.97,5.17 19,7.9 19,11V17L21,19M14,21A2,2 0 0,1 12,23A2,2 0 0,1 10,21"},Kr={key:0};function Qr(c,g,o,l,f,b){return P(),j("span",Fe(c.$attrs,{"aria-hidden":o.title?null:"true","aria-label":o.title,class:"material-design-icon bell-icon",role:"img",onClick:g[0]||(g[0]=v=>c.$emit("click",v))}),[(P(),j("svg",{fill:o.fillColor,class:"material-design-icon__svg",width:o.size,height:o.size,viewBox:"0 0 24 24"},[X("path",Xr,[o.title?(P(),j("title",Kr,$(o.title),1)):G("",!0)])],8,Jr))],16,Wr)}const Zr=fe(zr,[["render",Qr]]),Yr={key:0,class:"notifications-button__icon"},es=["width","height"],ts={__name:"IconNotification",props:{showDot:{type:Boolean,default:!1},showWarning:{type:Boolean,default:!1},size:{type:Number,default:20}},setup(c){var v;const g=(v=ji())==null?void 0:v.theming,o=/^#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;function l(I){const A=parseInt(I.substring(1,3),16)/255,T=parseInt(I.substring(3,5),16)/255,B=parseInt(I.substring(5,7),16)/255,e=Math.max(A,T,B),n=Math.min(A,T,B);let r=0,u=0;const _=(e+n)/2;if(e!==n){const y=e-n;switch(u=_>.5?y/(2-e-n):y/(e+n),e){case A:r=(T-B)/y+(T<B?6:0);break;case T:r=(B-A)/y+2;break;case B:r=(A-T)/y+4;break}r*=60}return[r,u,_]}const f=te(()=>{if(!(g!=null&&g.color)||!o.test(g==null?void 0:g.color))return!1;const[I,A,T]=l(g.color);return(I>=330||I<=15)&&A>.4&&(T>.1||T<.6)}),b=te(()=>{if(!(g!=null&&g.color)||!o.test(g==null?void 0:g.color))return!1;const[I,A,T]=l(g.color);return(I>=305||I<=64)&&A>.7&&(T>.1||T<.6)});return(I,A)=>c.showDot||c.showWarning?(P(),j("span",Yr,[(P(),j("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:c.size,height:c.size,viewBox:"0 0 24 24",fill:"currentColor"},[A[0]||(A[0]=X("path",{d:"M 19,11.79 C 18.5,11.92 18,12 17.5,12 14.47,12 12,9.53 12,6.5 12,5.03 12.58,3.7 13.5,2.71 13.15,2.28 12.61,2 12,2 10.9,2 10,2.9 10,4 V 4.29 C 7.03,5.17 5,7.9 5,11 v 6 l -2,2 v 1 H 21 V 19 L 19,17 V 11.79 M 12,23 c 1.11,0 2,-0.89 2,-2 h -4 c 0,1.11 0.9,2 2,2 z"},null,-1)),X("path",{class:Pt(["notification__dot",{"notification__dot--warning":c.showWarning&&!b.value,"notification__dot--white":f.value||c.showWarning&&b.value}]),d:"M 21,6.5 C 21,8.43 19.43,10 17.5,10 15.57,10 14,8.43 14,6.5 14,4.57 15.57,3 17.5,3 19.43,3 21,4.57 21,6.5"},null,2)],8,es))])):(P(),Q(Zr,{key:1,class:"notifications-button__icon",size:c.size},null,8,["size"]))}},ns={__name:"ActionButton",props:{action:{type:Object,required:!0}},emits:["click"],setup(c,{emit:g}){const o=c,l=g,f=te(()=>o.action.type==="WEB");function b(v){const I={url:o.action.link,type:o.action.type||"GET"};l("click",{event:v,action:I})}return(v,I)=>(P(),Q(ye(tt),{variant:f.value||c.action.primary?"primary":"secondary",href:f.value?c.action.link:void 0,class:"action-button pull-right",onClick:b},{default:J(()=>[Be($(c.action.label),1)]),_:1},8,["variant","href"]))}},os={name:"DefaultParameter",props:{type:{type:String,required:!0},id:{type:[Number,String],required:!0},name:{type:String,required:!0},link:{type:String,default:""}},computed:{hasInternalLink(){return this.link&&(this.type==="deck-board"||this.type==="deck-card")}}},is=["href"],rs=["href"],ss={key:2};function as(c,g,o,l,f,b){return b.hasInternalLink?(P(),j("a",{key:0,href:o.link},[X("strong",null,$(o.name),1)],8,is)):o.link?(P(),j("a",{key:1,href:o.link,class:"external",target:"_blank",rel:"noopener noreferrer"},[X("strong",null,$(o.name),1)],8,rs)):(P(),j("strong",ss,$(o.name),1))}const us=fe(os,[["render",as],["__scopeId","data-v-9803ab31"]]),ls={name:"FileParameter",props:{type:{type:String,required:!0},id:{type:[Number,String],required:!0},name:{type:String,required:!0},path:{type:String,default:""},link:{type:String,default:""}},computed:{title(){const c=this.path.lastIndexOf("/"),g=this.path.indexOf("/"),o=this.path.substring(g===0?1:0,c);return o.length===0?"":le("notifications","in {path}",{path:o})}}},cs=["title","href"];function ds(c,g,o,l,f,b){return P(),j("a",{title:b.title,class:"filename",href:o.link},$(o.name),9,cs)}const fs=fe(ls,[["render",ds]]),ps={name:"UserParameter",components:{NcUserBubble:gr},props:{type:{type:String,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},server:{type:String,default:""}},computed:{cloudId(){return this.server?this.id+"@"+this.server:""}}},_s={class:"mention"},hs=["title"];function ms(c,g,o,l,f,b){const v=ee("NcUserBubble");return P(),j("div",_s,[b.cloudId?(P(),j("strong",{key:1,title:b.cloudId},$(o.name),9,hs)):(P(),Q(v,{key:0,"display-name":o.name,user:o.id},null,8,["display-name","user"]))])}const gs=fe(ps,[["render",ms],["__scopeId","data-v-85edf4b2"]]),ys={name:"NotificationItem",components:{ActionButton:ns,NcButton:tt,NcDateTime:ir,IconClose:Yn,IconMessageOutline:eo,NcRichText:Li},props:{notification:{type:Object,required:!0}},emits:["remove"],data(){return{showFullMessage:!1}},computed:{timestamp(){return this.notification.datetime==="warning"?0:new Date(this.notification.datetime).valueOf()},useLink(){if(!this.notification.link)return!1;let c=!1;return Object.keys(Object(this.notification.subjectRichParameters)).forEach(g=>{Object(this.notification.subjectRichParameters)[g].link&&(c=!0)}),!c},preparedSubjectParameters(){return this.prepareParameters(this.notification.subjectRichParameters)},preparedMessageParameters(){return this.prepareParameters(this.notification.messageRichParameters)},isCollapsedMessage(){return this.notification.message.length>200&&!this.showFullMessage}},methods:{t:le,prepareParameters(c={}){const g={};return Object.keys(c).forEach(o=>{const l=c[o].type;l==="user"?g[o]={component:gs,props:c[o]}:l==="file"?g[o]={component:fs,props:c[o]}:g[o]={component:us,props:c[o]}}),g},onClickMessage(c){c.target.closest(".rich-text--wrapper")?this.showFullMessage=!this.showFullMessage:!this.notification.messageRich&&this.notification.message&&(this.showFullMessage=!this.showFullMessage)},async onClickAction({event:c,action:g}){try{const o={cancelAction:!1,notification:this.notification,action:g};if(await Ze("notifications:action:execute",o),g.type==="WEB"){o.cancelAction&&c.preventDefault();return}if(o.cancelAction)return;await Qe({method:g.type,url:g.url}),this.$emit("remove"),Ze("notifications:action:executed",c)}catch(o){console.error("Failed to perform action",o),Nt(le("notifications","Failed to perform action"))}},onDismissNotification(){Qe.delete(Ct("apps/notifications/api/v2/notifications/{id}",{id:this.notification.notificationId})).then(()=>{this.$emit("remove")}).catch(()=>{Nt(le("notifications","Failed to dismiss notification"))})}}},bs=["data-id","data-timestamp","data-object-type","data-app"],ws={class:"notification-heading"},vs=["href"],As={key:0,class:"image"},Ts=["src"],xs={class:"subject"},ks=["href"],Ss={key:0,class:"image"},Is=["src"],Es={key:2,class:"subject"},Os={key:2,class:"notification-subject"},Ns={key:0,class:"image"},Rs=["src"],Cs={key:2,class:"subject"},Ps={key:1},Bs={key:0,class:"notification-overflow"},Fs={key:4,class:"notification-actions"},js={key:5,class:"notification-actions"};function Ls(c,g,o,l,f,b){const v=ee("NcDateTime"),I=ee("IconClose"),A=ee("NcButton"),T=ee("NcRichText"),B=ee("ActionButton"),e=ee("IconMessageOutline");return P(),j("li",{class:"notification","data-id":o.notification.notificationId,"data-timestamp":b.timestamp,"data-object-type":o.notification.objectType,"data-app":o.notification.app},[X("div",ws,[b.timestamp?(P(),Q(v,{key:0,class:"notification-time","ignore-seconds":"",format:{timeStyle:"short",dateStyle:"long"},timestamp:b.timestamp},null,8,["timestamp"])):G("",!0),b.timestamp?(P(),Q(A,{key:1,class:"notification-dismiss-button",variant:"tertiary","aria-label":b.t("notifications","Dismiss"),onClick:b.onDismissNotification},{icon:J(()=>[ie(I,{size:20})]),_:1},8,["aria-label","onClick"])):G("",!0)]),o.notification.externalLink?(P(),j("a",{key:0,href:o.notification.externalLink,class:"notification-subject full-subject-link external",target:"_blank",rel:"noreferrer noopener"},[o.notification.icon?(P(),j("span",As,[X("img",{src:o.notification.icon,class:"notification-icon",alt:""},null,8,Ts)])):G("",!0),X("span",xs,$(o.notification.subject)+" ↗",1)],8,vs)):b.useLink?(P(),j("a",{key:1,href:o.notification.link,class:"notification-subject full-subject-link"},[o.notification.icon?(P(),j("span",Ss,[X("img",{src:o.notification.icon,class:"notification-icon",alt:""},null,8,Is)])):G("",!0),o.notification.subjectRich?(P(),Q(T,{key:1,text:o.notification.subjectRich,arguments:b.preparedSubjectParameters},null,8,["text","arguments"])):(P(),j("span",Es,$(o.notification.subject),1))],8,ks)):(P(),j("div",Os,[o.notification.icon?(P(),j("span",Ns,[X("img",{src:o.notification.icon,class:"notification-icon",alt:""},null,8,Rs)])):G("",!0),o.notification.subjectRich?(P(),Q(T,{key:1,text:o.notification.subjectRich,arguments:b.preparedSubjectParameters},null,8,["text","arguments"])):(P(),j("span",Cs,$(o.notification.subject),1))])),o.notification.message?(P(),j("div",{key:3,class:"notification-message",onClick:g[0]||(g[0]=(...n)=>b.onClickMessage&&b.onClickMessage(...n))},[X("div",{class:Pt(["message-container",{collapsed:b.isCollapsedMessage}])},[o.notification.messageRich?(P(),Q(T,{key:0,text:o.notification.messageRich,arguments:b.preparedMessageParameters,autolink:!0},null,8,["text","arguments"])):(P(),j("span",Ps,$(o.notification.message),1))],2),b.isCollapsedMessage?(P(),j("div",Bs)):G("",!0)])):G("",!0),o.notification.actions.length?(P(),j("div",Fs,[(P(!0),j(Kn,null,Qn(o.notification.actions,(n,r)=>(P(),Q(B,{key:r,action:n,onClick:b.onClickAction,onRemove:g[1]||(g[1]=u=>c.$emit("remove"))},null,8,["action","onClick"]))),128))])):o.notification.externalLink?(P(),j("div",js,[ie(A,{variant:"primary",href:"https://nextcloud.com/fairusepolicy",class:"action-button pull-right",target:"_blank",rel:"noreferrer noopener"},{icon:J(()=>[ie(e,{size:20})]),default:J(()=>[Be(" "+$(b.t("notifications","Contact Nextcloud GmbH"))+" ↗ ",1)]),_:1})])):G("",!0)],8,bs)}const Ms=fe(ys,[["render",Ls],["__scopeId","data-v-58882784"]]);async function to(c,g,o,l){const f=parseInt(K.getItem("lastUpdated"),10),b=K.getItem("tabId"),v=Math.floor(Date.now()/1e3);return(o||b===c&&f+25<v||b===c&&l||f+35<v)&&(K.setItem("tabId",c),K.setItem("lastUpdated",v.toString()),await Ds(g)),{status:parseInt(K.getItem("status"),10),headers:JSON.parse(K.getItem("headers")||"[]"),data:JSON.parse(K.getItem("data")||"[]"),tabId:K.getItem("tabId"),lastUpdated:parseInt(K.getItem("lastUpdated"),10)}}async function Et(c){K.getItem("tabId")!==c&&(await to(c,"",!0,!1),K.setItem("tabId",c))}function Us(c){return c.notificationId=c.notification_id,c.objectId=c.object_id,c.objectType=c.object_type,delete c.notification_id,delete c.object_id,delete c.object_type,c}async function Ds(c){var o;let g={};c&&(g={headers:{"If-None-Match":c}});try{const l=await Qe.get(Ct("apps/notifications/api/v2/notifications"),g);K.setItem("status",""+l.status),l.status!==204&&(K.setItem("headers",JSON.stringify(l.headers)),K.setItem("data",JSON.stringify(l.data.ocs.data.map(Us))))}catch(l){(o=l==null?void 0:l.response)!=null&&o.status?K.setItem("status",""+l.response.status):K.setItem("status","500")}}var Wn={},Jn;function qs(){return Jn||(Jn=1,function(c){(function(){var g=function(){this.init()};g.prototype={init:function(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var n=this||o;if(e=parseFloat(e),n.ctx||B(),typeof e<"u"&&e>=0&&e<=1){if(n._volume=e,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var r=0;r<n._howls.length;r++)if(!n._howls[r]._webAudio)for(var u=n._howls[r]._getSoundIds(),_=0;_<u.length;_++){var y=n._howls[r]._soundById(u[_]);y&&y._node&&(y._node.volume=y._volume*e)}return n}return n._volume},mute:function(e){var n=this||o;n.ctx||B(),n._muted=e,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e?0:n._volume,o.ctx.currentTime);for(var r=0;r<n._howls.length;r++)if(!n._howls[r]._webAudio)for(var u=n._howls[r]._getSoundIds(),_=0;_<u.length;_++){var y=n._howls[r]._soundById(u[_]);y&&y._node&&(y._node.muted=e?!0:y._muted)}return n},stop:function(){for(var e=this||o,n=0;n<e._howls.length;n++)e._howls[n].stop();return e},unload:function(){for(var e=this||o,n=e._howls.length-1;n>=0;n--)e._howls[n].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,B()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var n=new Audio;typeof n.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch(r){e.noAudio=!0}else e.noAudio=!0;try{var n=new Audio;n.muted&&(e.noAudio=!0)}catch(r){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,n=null;try{n=typeof Audio<"u"?new Audio:null}catch(F){return e}if(!n||typeof n.canPlayType!="function")return e;var r=n.canPlayType("audio/mpeg;").replace(/^no$/,""),u=e._navigator?e._navigator.userAgent:"",_=u.match(/OPR\/(\d+)/g),y=_&&parseInt(_[0].split("/")[1],10)<33,p=u.indexOf("Safari")!==-1&&u.indexOf("Chrome")===-1,x=u.match(/Version\/(.*?) /),C=p&&x&&parseInt(x[1],10)<15;return e._codecs={mp3:!!(!y&&(r||n.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!r,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!C&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!C&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||o;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var n=function(r){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var u=new Audio;u._unlocked=!0,e._releaseHtml5Audio(u)}catch(F){e.noAudio=!0;break}for(var _=0;_<e._howls.length;_++)if(!e._howls[_]._webAudio)for(var y=e._howls[_]._getSoundIds(),p=0;p<y.length;p++){var x=e._howls[_]._soundById(y[p]);x&&x._node&&!x._node._unlocked&&(x._node._unlocked=!0,x._node.load())}e._autoResume();var C=e.ctx.createBufferSource();C.buffer=e._scratchBuffer,C.connect(e.ctx.destination),typeof C.start>"u"?C.noteOn(0):C.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),C.onended=function(){C.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var F=0;F<e._howls.length;F++)e._howls[F]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),e}},_obtainHtml5Audio:function(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var n=new Audio().play();return n&&typeof Promise<"u"&&(n instanceof Promise||typeof n.then=="function")&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var n=this||o;return e._unlocked&&n._html5AudioPool.push(e),n},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!o.usingWebAudio)){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio){for(var r=0;r<e._howls[n]._sounds.length;r++)if(!e._howls[n]._sounds[r]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var u=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(u,u)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!o.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var o=new g,l=function(e){var n=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}n.init(e)};l.prototype={init:function(e){var n=this;return o.ctx||B(),n._autoplay=e.autoplay||!1,n._format=typeof e.format!="string"?e.format:[e.format],n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src=typeof e.src!="string"?e.src:[e.src],n._volume=e.volume!==void 0?e.volume:1,n._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=e.onend?[{fn:e.onend}]:[],n._onfade=e.onfade?[{fn:e.onfade}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._onmute=e.onmute?[{fn:e.onmute}]:[],n._onvolume=e.onvolume?[{fn:e.onvolume}]:[],n._onrate=e.onrate?[{fn:e.onrate}]:[],n._onseek=e.onseek?[{fn:e.onseek}]:[],n._onunlock=e.onunlock?[{fn:e.onunlock}]:[],n._onresume=[],n._webAudio=o.usingWebAudio&&!n._html5,typeof o.ctx<"u"&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&n._preload!=="none"&&n.load(),n},load:function(){var e=this,n=null;if(o.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var u,_;if(e._format&&e._format[r])u=e._format[r];else{if(_=e._src[r],typeof _!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}u=/^data:audio\/([^;,]+);/i.exec(_),u||(u=/\.([^.]+)$/.exec(_.split("?",1)[0])),u&&(u=u[1].toLowerCase())}if(u||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),u&&o.codecs(u)){n=e._src[r];break}}if(!n){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=n,e._state="loading",window.location.protocol==="https:"&&n.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new f(e),e._webAudio&&v(e),e},play:function(e,n){var r=this,u=null;if(typeof e=="number")u=e,e=null;else{if(typeof e=="string"&&r._state==="loaded"&&!r._sprite[e])return null;if(typeof e>"u"&&(e="__default",!r._playLock)){for(var _=0,y=0;y<r._sounds.length;y++)r._sounds[y]._paused&&!r._sounds[y]._ended&&(_++,u=r._sounds[y]._id);_===1?e=null:u=null}}var p=u?r._soundById(u):r._inactiveSound();if(!p)return null;if(u&&!e&&(e=p._sprite||"__default"),r._state!=="loaded"){p._sprite=e,p._ended=!1;var x=p._id;return r._queue.push({event:"play",action:function(){r.play(x)}}),x}if(u&&!p._paused)return n||r._loadQueue("play"),p._id;r._webAudio&&o._autoResume();var C=Math.max(0,p._seek>0?p._seek:r._sprite[e][0]/1e3),F=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-C),H=F*1e3/Math.abs(p._rate),re=r._sprite[e][0]/1e3,Te=(r._sprite[e][0]+r._sprite[e][1])/1e3;p._sprite=e,p._ended=!1;var Oe=function(){p._paused=!1,p._seek=C,p._start=re,p._stop=Te,p._loop=!!(p._loop||r._sprite[e][2])};if(C>=Te){r._ended(p);return}var D=p._node;if(r._webAudio){var je=function(){r._playLock=!1,Oe(),r._refreshBuffer(p);var pe=p._muted||r._muted?0:p._volume;D.gain.setValueAtTime(pe,o.ctx.currentTime),p._playStart=o.ctx.currentTime,typeof D.bufferSource.start>"u"?p._loop?D.bufferSource.noteGrainOn(0,C,86400):D.bufferSource.noteGrainOn(0,C,F):p._loop?D.bufferSource.start(0,C,86400):D.bufferSource.start(0,C,F),H!==1/0&&(r._endTimers[p._id]=setTimeout(r._ended.bind(r,p),H)),n||setTimeout(function(){r._emit("play",p._id),r._loadQueue()},0)};o.state==="running"&&o.ctx.state!=="interrupted"?je():(r._playLock=!0,r.once("resume",je),r._clearTimer(p._id))}else{var Le=function(){D.currentTime=C,D.muted=p._muted||r._muted||o._muted||D.muted,D.volume=p._volume*o.volume(),D.playbackRate=p._rate;try{var pe=D.play();if(pe&&typeof Promise<"u"&&(pe instanceof Promise||typeof pe.then=="function")?(r._playLock=!0,Oe(),pe.then(function(){r._playLock=!1,D._unlocked=!0,n?r._loadQueue():r._emit("play",p._id)}).catch(function(){r._playLock=!1,r._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):n||(r._playLock=!1,Oe(),r._emit("play",p._id)),D.playbackRate=p._rate,D.paused){r._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||p._loop?r._endTimers[p._id]=setTimeout(r._ended.bind(r,p),H):(r._endTimers[p._id]=function(){r._ended(p),D.removeEventListener("ended",r._endTimers[p._id],!1)},D.addEventListener("ended",r._endTimers[p._id],!1))}catch(it){r._emit("playerror",p._id,it)}};D.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(D.src=r._src,D.load());var ot=window&&window.ejecta||!D.readyState&&o._navigator.isCocoonJS;if(D.readyState>=3||ot)Le();else{r._playLock=!0,r._state="loading";var Me=function(){r._state="loaded",Le(),D.removeEventListener(o._canPlayEvent,Me,!1)};D.addEventListener(o._canPlayEvent,Me,!1),r._clearTimer(p._id)}}return p._id},pause:function(e){var n=this;if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(e)}}),n;for(var r=n._getSoundIds(e),u=0;u<r.length;u++){n._clearTimer(r[u]);var _=n._soundById(r[u]);if(_&&!_._paused&&(_._seek=n.seek(r[u]),_._rateSeek=0,_._paused=!0,n._stopFade(r[u]),_._node))if(n._webAudio){if(!_._node.bufferSource)continue;typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),n._cleanBuffer(_._node)}else(!isNaN(_._node.duration)||_._node.duration===1/0)&&_._node.pause();arguments[1]||n._emit("pause",_?_._id:null)}return n},stop:function(e,n){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(e)}}),r;for(var u=r._getSoundIds(e),_=0;_<u.length;_++){r._clearTimer(u[_]);var y=r._soundById(u[_]);y&&(y._seek=y._start||0,y._rateSeek=0,y._paused=!0,y._ended=!0,r._stopFade(u[_]),y._node&&(r._webAudio?y._node.bufferSource&&(typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),r._cleanBuffer(y._node)):(!isNaN(y._node.duration)||y._node.duration===1/0)&&(y._node.currentTime=y._start||0,y._node.pause(),y._node.duration===1/0&&r._clearSound(y._node))),n||r._emit("stop",y._id))}return r},mute:function(e,n){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(e,n)}}),r;if(typeof n>"u")if(typeof e=="boolean")r._muted=e;else return r._muted;for(var u=r._getSoundIds(n),_=0;_<u.length;_++){var y=r._soundById(u[_]);y&&(y._muted=e,y._interval&&r._stopFade(y._id),r._webAudio&&y._node?y._node.gain.setValueAtTime(e?0:y._volume,o.ctx.currentTime):y._node&&(y._node.muted=o._muted?!0:e),r._emit("mute",y._id))}return r},volume:function(){var e=this,n=arguments,r,u;if(n.length===0)return e._volume;if(n.length===1||n.length===2&&typeof n[1]>"u"){var _=e._getSoundIds(),y=_.indexOf(n[0]);y>=0?u=parseInt(n[0],10):r=parseFloat(n[0])}else n.length>=2&&(r=parseFloat(n[0]),u=parseInt(n[1],10));var p;if(typeof r<"u"&&r>=0&&r<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,n)}}),e;typeof u>"u"&&(e._volume=r),u=e._getSoundIds(u);for(var x=0;x<u.length;x++)p=e._soundById(u[x]),p&&(p._volume=r,n[2]||e._stopFade(u[x]),e._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(r,o.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=r*o.volume()),e._emit("volume",p._id))}else return p=u?e._soundById(u):e._sounds[0],p?p._volume:0;return e},fade:function(e,n,r,u){var _=this;if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"fade",action:function(){_.fade(e,n,r,u)}}),_;e=Math.min(Math.max(0,parseFloat(e)),1),n=Math.min(Math.max(0,parseFloat(n)),1),r=parseFloat(r),_.volume(e,u);for(var y=_._getSoundIds(u),p=0;p<y.length;p++){var x=_._soundById(y[p]);if(x){if(u||_._stopFade(y[p]),_._webAudio&&!x._muted){var C=o.ctx.currentTime,F=C+r/1e3;x._volume=e,x._node.gain.setValueAtTime(e,C),x._node.gain.linearRampToValueAtTime(n,F)}_._startFadeInterval(x,e,n,r,y[p],typeof u>"u")}}return _},_startFadeInterval:function(e,n,r,u,_,y){var p=this,x=n,C=r-n,F=Math.abs(C/.01),H=Math.max(4,F>0?u/F:u),re=Date.now();e._fadeTo=r,e._interval=setInterval(function(){var Te=(Date.now()-re)/u;re=Date.now(),x+=C*Te,x=Math.round(x*100)/100,C<0?x=Math.max(r,x):x=Math.min(r,x),p._webAudio?e._volume=x:p.volume(x,e._id,!0),y&&(p._volume=x),(r<n&&x<=r||r>n&&x>=r)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,p.volume(r,e._id),p._emit("fade",e._id))},H)},_stopFade:function(e){var n=this,r=n._soundById(e);return r&&r._interval&&(n._webAudio&&r._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(r._interval),r._interval=null,n.volume(r._fadeTo,e),r._fadeTo=null,n._emit("fade",e)),n},loop:function(){var e=this,n=arguments,r,u,_;if(n.length===0)return e._loop;if(n.length===1)if(typeof n[0]=="boolean")r=n[0],e._loop=r;else return _=e._soundById(parseInt(n[0],10)),_?_._loop:!1;else n.length===2&&(r=n[0],u=parseInt(n[1],10));for(var y=e._getSoundIds(u),p=0;p<y.length;p++)_=e._soundById(y[p]),_&&(_._loop=r,e._webAudio&&_._node&&_._node.bufferSource&&(_._node.bufferSource.loop=r,r&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop,e.playing(y[p])&&(e.pause(y[p],!0),e.play(y[p],!0)))));return e},rate:function(){var e=this,n=arguments,r,u;if(n.length===0)u=e._sounds[0]._id;else if(n.length===1){var _=e._getSoundIds(),y=_.indexOf(n[0]);y>=0?u=parseInt(n[0],10):r=parseFloat(n[0])}else n.length===2&&(r=parseFloat(n[0]),u=parseInt(n[1],10));var p;if(typeof r=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,n)}}),e;typeof u>"u"&&(e._rate=r),u=e._getSoundIds(u);for(var x=0;x<u.length;x++)if(p=e._soundById(u[x]),p){e.playing(u[x])&&(p._rateSeek=e.seek(u[x]),p._playStart=e._webAudio?o.ctx.currentTime:p._playStart),p._rate=r,e._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(r,o.ctx.currentTime):p._node&&(p._node.playbackRate=r);var C=e.seek(u[x]),F=(e._sprite[p._sprite][0]+e._sprite[p._sprite][1])/1e3-C,H=F*1e3/Math.abs(p._rate);(e._endTimers[u[x]]||!p._paused)&&(e._clearTimer(u[x]),e._endTimers[u[x]]=setTimeout(e._ended.bind(e,p),H)),e._emit("rate",p._id)}}else return p=e._soundById(u),p?p._rate:e._rate;return e},seek:function(){var e=this,n=arguments,r,u;if(n.length===0)e._sounds.length&&(u=e._sounds[0]._id);else if(n.length===1){var _=e._getSoundIds(),y=_.indexOf(n[0]);y>=0?u=parseInt(n[0],10):e._sounds.length&&(u=e._sounds[0]._id,r=parseFloat(n[0]))}else n.length===2&&(r=parseFloat(n[0]),u=parseInt(n[1],10));if(typeof u>"u")return 0;if(typeof r=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,n)}}),e;var p=e._soundById(u);if(p)if(typeof r=="number"&&r>=0){var x=e.playing(u);x&&e.pause(u,!0),p._seek=r,p._ended=!1,e._clearTimer(u),!e._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=r);var C=function(){x&&e.play(u,!0),e._emit("seek",u)};if(x&&!e._webAudio){var F=function(){e._playLock?setTimeout(F,0):C()};setTimeout(F,0)}else C()}else if(e._webAudio){var H=e.playing(u)?o.ctx.currentTime-p._playStart:0,re=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(re+H*Math.abs(p._rate))}else return p._node.currentTime;return e},playing:function(e){var n=this;if(typeof e=="number"){var r=n._soundById(e);return r?!r._paused:!1}for(var u=0;u<n._sounds.length;u++)if(!n._sounds[u]._paused)return!0;return!1},duration:function(e){var n=this,r=n._duration,u=n._soundById(e);return u&&(r=n._sprite[u._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var e=this,n=e._sounds,r=0;r<n.length;r++)n[r]._paused||e.stop(n[r]._id),e._webAudio||(e._clearSound(n[r]._node),n[r]._node.removeEventListener("error",n[r]._errorFn,!1),n[r]._node.removeEventListener(o._canPlayEvent,n[r]._loadFn,!1),n[r]._node.removeEventListener("ended",n[r]._endFn,!1),o._releaseHtml5Audio(n[r]._node)),delete n[r]._node,e._clearTimer(n[r]._id);var u=o._howls.indexOf(e);u>=0&&o._howls.splice(u,1);var _=!0;for(r=0;r<o._howls.length;r++)if(o._howls[r]._src===e._src||e._src.indexOf(o._howls[r]._src)>=0){_=!1;break}return b&&_&&delete b[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,n,r,u){var _=this,y=_["_on"+e];return typeof n=="function"&&y.push(u?{id:r,fn:n,once:u}:{id:r,fn:n}),_},off:function(e,n,r){var u=this,_=u["_on"+e],y=0;if(typeof n=="number"&&(r=n,n=null),n||r)for(y=0;y<_.length;y++){var p=r===_[y].id;if(n===_[y].fn&&p||!n&&p){_.splice(y,1);break}}else if(e)u["_on"+e]=[];else{var x=Object.keys(u);for(y=0;y<x.length;y++)x[y].indexOf("_on")===0&&Array.isArray(u[x[y]])&&(u[x[y]]=[])}return u},once:function(e,n,r){var u=this;return u.on(e,n,r,1),u},_emit:function(e,n,r){for(var u=this,_=u["_on"+e],y=_.length-1;y>=0;y--)(!_[y].id||_[y].id===n||e==="load")&&(setTimeout(function(p){p.call(this,n,r)}.bind(u,_[y].fn),0),_[y].once&&u.off(e,_[y].fn,_[y].id));return u._loadQueue(e),u},_loadQueue:function(e){var n=this;if(n._queue.length>0){var r=n._queue[0];r.event===e&&(n._queue.shift(),n._loadQueue()),e||r.action()}return n},_ended:function(e){var n=this,r=e._sprite;if(!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(n._ended.bind(n,e),100),n;var u=!!(e._loop||n._sprite[r][2]);if(n._emit("end",e._id),!n._webAudio&&u&&n.stop(e._id,!0).play(e._id),n._webAudio&&u){n._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var _=(e._stop-e._start)*1e3/Math.abs(e._rate);n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),_)}return n._webAudio&&!u&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,n._clearTimer(e._id),n._cleanBuffer(e._node),o._autoSuspend()),!n._webAudio&&!u&&n.stop(e._id,!0),n},_clearTimer:function(e){var n=this;if(n._endTimers[e]){if(typeof n._endTimers[e]!="function")clearTimeout(n._endTimers[e]);else{var r=n._soundById(e);r&&r._node&&r._node.removeEventListener("ended",n._endTimers[e],!1)}delete n._endTimers[e]}return n},_soundById:function(e){for(var n=this,r=0;r<n._sounds.length;r++)if(e===n._sounds[r]._id)return n._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var n=0;n<e._sounds.length;n++)if(e._sounds[n]._ended)return e._sounds[n].reset();return new f(e)},_drain:function(){var e=this,n=e._pool,r=0,u=0;if(!(e._sounds.length<n)){for(u=0;u<e._sounds.length;u++)e._sounds[u]._ended&&r++;for(u=e._sounds.length-1;u>=0;u--){if(r<=n)return;e._sounds[u]._ended&&(e._webAudio&&e._sounds[u]._node&&e._sounds[u]._node.disconnect(0),e._sounds.splice(u,1),r--)}}},_getSoundIds:function(e){var n=this;if(typeof e>"u"){for(var r=[],u=0;u<n._sounds.length;u++)r.push(n._sounds[u]._id);return r}else return[e]},_refreshBuffer:function(e){var n=this;return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=b[n._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),n},_cleanBuffer:function(e){var n=this,r=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return n;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),r))try{e.bufferSource.buffer=o._scratchBuffer}catch(u){}return e.bufferSource=null,n},_clearSound:function(e){var n=/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent);n||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var f=function(e){this._parent=e,this.init()};f.prototype={init:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++o._counter,n._sounds.push(e),e.create(),e},create:function(){var e=this,n=e._parent,r=o._muted||e._muted||e._parent._muted?0:e._volume;return n._webAudio?(e._node=typeof o.ctx.createGain>"u"?o.ctx.createGainNode():o.ctx.createGain(),e._node.gain.setValueAtTime(r,o.ctx.currentTime),e._node.paused=!0,e._node.connect(o.masterGain)):o.noAudio||(e._node=o._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(o._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=n._src,e._node.preload=n._preload===!0?"auto":n._preload,e._node.volume=r*o.volume(),e._node.load()),e},reset:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++o._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,n=e._parent;n._duration=Math.ceil(e._node.duration*10)/10,Object.keys(n._sprite).length===0&&(n._sprite={__default:[0,n._duration*1e3]}),n._state!=="loaded"&&(n._state="loaded",n._emit("load"),n._loadQueue()),e._node.removeEventListener(o._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,n=e._parent;n._duration===1/0&&(n._duration=Math.ceil(e._node.duration*10)/10,n._sprite.__default[1]===1/0&&(n._sprite.__default[1]=n._duration*1e3),n._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var b={},v=function(e){var n=e._src;if(b[n]){e._duration=b[n].duration,T(e);return}if(/^data:[^;]+;base64,/.test(n)){for(var r=atob(n.split(",")[1]),u=new Uint8Array(r.length),_=0;_<r.length;++_)u[_]=r.charCodeAt(_);A(u.buffer,e)}else{var y=new XMLHttpRequest;y.open(e._xhr.method,n,!0),y.withCredentials=e._xhr.withCredentials,y.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(p){y.setRequestHeader(p,e._xhr.headers[p])}),y.onload=function(){var p=(y.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+y.status+".");return}A(y.response,e)},y.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete b[n],e.load())},I(y)}},I=function(e){try{e.send()}catch(n){e.onerror()}},A=function(e,n){var r=function(){n._emit("loaderror",null,"Decoding audio data failed.")},u=function(_){_&&n._sounds.length>0?(b[n._src]=_,T(n,_)):r()};typeof Promise<"u"&&o.ctx.decodeAudioData.length===1?o.ctx.decodeAudioData(e).then(u).catch(r):o.ctx.decodeAudioData(e,u,r)},T=function(e,n){n&&!e._duration&&(e._duration=n.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},B=function(){if(o.usingWebAudio){try{typeof AudioContext<"u"?o.ctx=new AudioContext:typeof webkitAudioContext<"u"?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(_){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),n=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=n?parseInt(n[1],10):null;if(e&&r&&r<9){var u=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!u&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=typeof o.ctx.createGain>"u"?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};c.Howler=o,c.Howl=l,typeof Ee<"u"?(Ee.HowlerGlobal=g,Ee.Howler=o,Ee.Howl=l,Ee.Sound=f):typeof window<"u"&&(window.HowlerGlobal=g,window.Howler=o,window.Howl=l,window.Sound=f)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(o){var l=this;if(!l.ctx||!l.ctx.listener)return l;for(var f=l._howls.length-1;f>=0;f--)l._howls[f].stereo(o);return l},HowlerGlobal.prototype.pos=function(o,l,f){var b=this;if(!b.ctx||!b.ctx.listener)return b;if(l=typeof l!="number"?b._pos[1]:l,f=typeof f!="number"?b._pos[2]:f,typeof o=="number")b._pos=[o,l,f],typeof b.ctx.listener.positionX<"u"?(b.ctx.listener.positionX.setTargetAtTime(b._pos[0],Howler.ctx.currentTime,.1),b.ctx.listener.positionY.setTargetAtTime(b._pos[1],Howler.ctx.currentTime,.1),b.ctx.listener.positionZ.setTargetAtTime(b._pos[2],Howler.ctx.currentTime,.1)):b.ctx.listener.setPosition(b._pos[0],b._pos[1],b._pos[2]);else return b._pos;return b},HowlerGlobal.prototype.orientation=function(o,l,f,b,v,I){var A=this;if(!A.ctx||!A.ctx.listener)return A;var T=A._orientation;if(l=typeof l!="number"?T[1]:l,f=typeof f!="number"?T[2]:f,b=typeof b!="number"?T[3]:b,v=typeof v!="number"?T[4]:v,I=typeof I!="number"?T[5]:I,typeof o=="number")A._orientation=[o,l,f,b,v,I],typeof A.ctx.listener.forwardX<"u"?(A.ctx.listener.forwardX.setTargetAtTime(o,Howler.ctx.currentTime,.1),A.ctx.listener.forwardY.setTargetAtTime(l,Howler.ctx.currentTime,.1),A.ctx.listener.forwardZ.setTargetAtTime(f,Howler.ctx.currentTime,.1),A.ctx.listener.upX.setTargetAtTime(b,Howler.ctx.currentTime,.1),A.ctx.listener.upY.setTargetAtTime(v,Howler.ctx.currentTime,.1),A.ctx.listener.upZ.setTargetAtTime(I,Howler.ctx.currentTime,.1)):A.ctx.listener.setOrientation(o,l,f,b,v,I);else return T;return A},Howl.prototype.init=function(o){return function(l){var f=this;return f._orientation=l.orientation||[1,0,0],f._stereo=l.stereo||null,f._pos=l.pos||null,f._pannerAttr={coneInnerAngle:typeof l.coneInnerAngle<"u"?l.coneInnerAngle:360,coneOuterAngle:typeof l.coneOuterAngle<"u"?l.coneOuterAngle:360,coneOuterGain:typeof l.coneOuterGain<"u"?l.coneOuterGain:0,distanceModel:typeof l.distanceModel<"u"?l.distanceModel:"inverse",maxDistance:typeof l.maxDistance<"u"?l.maxDistance:1e4,panningModel:typeof l.panningModel<"u"?l.panningModel:"HRTF",refDistance:typeof l.refDistance<"u"?l.refDistance:1,rolloffFactor:typeof l.rolloffFactor<"u"?l.rolloffFactor:1},f._onstereo=l.onstereo?[{fn:l.onstereo}]:[],f._onpos=l.onpos?[{fn:l.onpos}]:[],f._onorientation=l.onorientation?[{fn:l.onorientation}]:[],o.call(this,l)}}(Howl.prototype.init),Howl.prototype.stereo=function(o,l){var f=this;if(!f._webAudio)return f;if(f._state!=="loaded")return f._queue.push({event:"stereo",action:function(){f.stereo(o,l)}}),f;var b=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof l>"u")if(typeof o=="number")f._stereo=o,f._pos=[o,0,0];else return f._stereo;for(var v=f._getSoundIds(l),I=0;I<v.length;I++){var A=f._soundById(v[I]);if(A)if(typeof o=="number")A._stereo=o,A._pos=[o,0,0],A._node&&(A._pannerAttr.panningModel="equalpower",(!A._panner||!A._panner.pan)&&g(A,b),b==="spatial"?typeof A._panner.positionX<"u"?(A._panner.positionX.setValueAtTime(o,Howler.ctx.currentTime),A._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),A._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):A._panner.setPosition(o,0,0):A._panner.pan.setValueAtTime(o,Howler.ctx.currentTime)),f._emit("stereo",A._id);else return A._stereo}return f},Howl.prototype.pos=function(o,l,f,b){var v=this;if(!v._webAudio)return v;if(v._state!=="loaded")return v._queue.push({event:"pos",action:function(){v.pos(o,l,f,b)}}),v;if(l=typeof l!="number"?0:l,f=typeof f!="number"?-.5:f,typeof b>"u")if(typeof o=="number")v._pos=[o,l,f];else return v._pos;for(var I=v._getSoundIds(b),A=0;A<I.length;A++){var T=v._soundById(I[A]);if(T)if(typeof o=="number")T._pos=[o,l,f],T._node&&((!T._panner||T._panner.pan)&&g(T,"spatial"),typeof T._panner.positionX<"u"?(T._panner.positionX.setValueAtTime(o,Howler.ctx.currentTime),T._panner.positionY.setValueAtTime(l,Howler.ctx.currentTime),T._panner.positionZ.setValueAtTime(f,Howler.ctx.currentTime)):T._panner.setPosition(o,l,f)),v._emit("pos",T._id);else return T._pos}return v},Howl.prototype.orientation=function(o,l,f,b){var v=this;if(!v._webAudio)return v;if(v._state!=="loaded")return v._queue.push({event:"orientation",action:function(){v.orientation(o,l,f,b)}}),v;if(l=typeof l!="number"?v._orientation[1]:l,f=typeof f!="number"?v._orientation[2]:f,typeof b>"u")if(typeof o=="number")v._orientation=[o,l,f];else return v._orientation;for(var I=v._getSoundIds(b),A=0;A<I.length;A++){var T=v._soundById(I[A]);if(T)if(typeof o=="number")T._orientation=[o,l,f],T._node&&(T._panner||(T._pos||(T._pos=v._pos||[0,0,-.5]),g(T,"spatial")),typeof T._panner.orientationX<"u"?(T._panner.orientationX.setValueAtTime(o,Howler.ctx.currentTime),T._panner.orientationY.setValueAtTime(l,Howler.ctx.currentTime),T._panner.orientationZ.setValueAtTime(f,Howler.ctx.currentTime)):T._panner.setOrientation(o,l,f)),v._emit("orientation",T._id);else return T._orientation}return v},Howl.prototype.pannerAttr=function(){var o=this,l=arguments,f,b,v;if(!o._webAudio)return o;if(l.length===0)return o._pannerAttr;if(l.length===1)if(typeof l[0]=="object")f=l[0],typeof b>"u"&&(f.pannerAttr||(f.pannerAttr={coneInnerAngle:f.coneInnerAngle,coneOuterAngle:f.coneOuterAngle,coneOuterGain:f.coneOuterGain,distanceModel:f.distanceModel,maxDistance:f.maxDistance,refDistance:f.refDistance,rolloffFactor:f.rolloffFactor,panningModel:f.panningModel}),o._pannerAttr={coneInnerAngle:typeof f.pannerAttr.coneInnerAngle<"u"?f.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:typeof f.pannerAttr.coneOuterAngle<"u"?f.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:typeof f.pannerAttr.coneOuterGain<"u"?f.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:typeof f.pannerAttr.distanceModel<"u"?f.pannerAttr.distanceModel:o._distanceModel,maxDistance:typeof f.pannerAttr.maxDistance<"u"?f.pannerAttr.maxDistance:o._maxDistance,refDistance:typeof f.pannerAttr.refDistance<"u"?f.pannerAttr.refDistance:o._refDistance,rolloffFactor:typeof f.pannerAttr.rolloffFactor<"u"?f.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:typeof f.pannerAttr.panningModel<"u"?f.pannerAttr.panningModel:o._panningModel});else return v=o._soundById(parseInt(l[0],10)),v?v._pannerAttr:o._pannerAttr;else l.length===2&&(f=l[0],b=parseInt(l[1],10));for(var I=o._getSoundIds(b),A=0;A<I.length;A++)if(v=o._soundById(I[A]),v){var T=v._pannerAttr;T={coneInnerAngle:typeof f.coneInnerAngle<"u"?f.coneInnerAngle:T.coneInnerAngle,coneOuterAngle:typeof f.coneOuterAngle<"u"?f.coneOuterAngle:T.coneOuterAngle,coneOuterGain:typeof f.coneOuterGain<"u"?f.coneOuterGain:T.coneOuterGain,distanceModel:typeof f.distanceModel<"u"?f.distanceModel:T.distanceModel,maxDistance:typeof f.maxDistance<"u"?f.maxDistance:T.maxDistance,refDistance:typeof f.refDistance<"u"?f.refDistance:T.refDistance,rolloffFactor:typeof f.rolloffFactor<"u"?f.rolloffFactor:T.rolloffFactor,panningModel:typeof f.panningModel<"u"?f.panningModel:T.panningModel};var B=v._panner;B||(v._pos||(v._pos=o._pos||[0,0,-.5]),g(v,"spatial"),B=v._panner),B.coneInnerAngle=T.coneInnerAngle,B.coneOuterAngle=T.coneOuterAngle,B.coneOuterGain=T.coneOuterGain,B.distanceModel=T.distanceModel,B.maxDistance=T.maxDistance,B.refDistance=T.refDistance,B.rolloffFactor=T.rolloffFactor,B.panningModel=T.panningModel}return o},Sound.prototype.init=function(o){return function(){var l=this,f=l._parent;l._orientation=f._orientation,l._stereo=f._stereo,l._pos=f._pos,l._pannerAttr=f._pannerAttr,o.call(this),l._stereo?f.stereo(l._stereo):l._pos&&f.pos(l._pos[0],l._pos[1],l._pos[2],l._id)}}(Sound.prototype.init),Sound.prototype.reset=function(o){return function(){var l=this,f=l._parent;return l._orientation=f._orientation,l._stereo=f._stereo,l._pos=f._pos,l._pannerAttr=f._pannerAttr,l._stereo?f.stereo(l._stereo):l._pos?f.pos(l._pos[0],l._pos[1],l._pos[2],l._id):l._panner&&(l._panner.disconnect(0),l._panner=void 0,f._refreshBuffer(l)),o.call(this)}}(Sound.prototype.reset);var g=function(o,l){l=l||"spatial",l==="spatial"?(o._panner=Howler.ctx.createPanner(),o._panner.coneInnerAngle=o._pannerAttr.coneInnerAngle,o._panner.coneOuterAngle=o._pannerAttr.coneOuterAngle,o._panner.coneOuterGain=o._pannerAttr.coneOuterGain,o._panner.distanceModel=o._pannerAttr.distanceModel,o._panner.maxDistance=o._pannerAttr.maxDistance,o._panner.refDistance=o._pannerAttr.refDistance,o._panner.rolloffFactor=o._pannerAttr.rolloffFactor,o._panner.panningModel=o._pannerAttr.panningModel,typeof o._panner.positionX<"u"?(o._panner.positionX.setValueAtTime(o._pos[0],Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(o._pos[1],Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(o._pos[2],Howler.ctx.currentTime)):o._panner.setPosition(o._pos[0],o._pos[1],o._pos[2]),typeof o._panner.orientationX<"u"?(o._panner.orientationX.setValueAtTime(o._orientation[0],Howler.ctx.currentTime),o._panner.orientationY.setValueAtTime(o._orientation[1],Howler.ctx.currentTime),o._panner.orientationZ.setValueAtTime(o._orientation[2],Howler.ctx.currentTime)):o._panner.setOrientation(o._orientation[0],o._orientation[1],o._orientation[2])):(o._panner=Howler.ctx.createStereoPanner(),o._panner.pan.setValueAtTime(o._stereo,Howler.ctx.currentTime)),o._panner.connect(o._node),o._paused||o._parent.pause(o._id,!0).play(o._id,!0)}}()}(Wn)),Wn}var Ot=qs();function Hs(c){if(!c.shouldNotify)return;const g=new Notification(c.subject,{title:c.subject,lang:Mi(),body:c.message,icon:c.icon,tag:c.notificationId});c.link&&(g.onclick=async function(){const o={cancelAction:!1,notification:c,action:{url:c.link,type:"WEB"}};await Ze("notifications:action:execute",o),o.cancelAction||(console.debug("Redirecting because of a click onto a notification",c.link),window.location.href=c.link),window.focus()}),Vs(c)}function Vs(c){var g,o,l,f,b;if(c.app==="spreed"&&c.objectType==="call"){if(Ye("notifications","sound_talk")){const v={src:[In("notifications","img","talk.ogg")],html5:!0,volume:.5},I=new Ot.Howl(v),A=(g=I._sounds[0]._node.sinkId)!=null?g:"";I.play();const T=K.getItem("secondary_speaker")==="true",B=(l=(o=JSON.parse(K.getItem("secondary_speaker_device")))==null?void 0:o.id)!=null?l:null;if(T&&B&&A!==B){const e=new Ot.Howl(v);(b=(f=I._sounds[0]._node).setSinkId)==null||b.call(f,B).then(()=>console.debug("Audio output successfully redirected to secondary speaker")).catch(n=>console.error("Failed to redirect audio output:",n)),e.play()}}}else Ye("notifications","sound_notification")&&new Ot.Howl({src:[In("notifications","img","notification.ogg")],volume:.5}).play()}const $s=Ye("core","config",{session_keepalive:!0}).session_keepalive,Gs=Ye("notifications","throttled_push_notifications"),zs={notificationId:-1,app:"core",user:"",datetime:"warning",objectId:"",objectType:"",subject:le("notifications","Push notifications might be unreliable"),message:le("notifications","Nextcloud GmbH sponsors a free push notification gateway for private users. To ensure good service, the gateway limits the number of push notifications per server. For enterprise users, a more scalable gateway is available. Contact Nextcloud GmbH for more information."),link:"https://nextcloud.com/fairusepolicy",actions:[],externalLink:"https://nextcloud.com/fairusepolicy",icon:qi("core","actions/alert-outline.svg")},Ws={name:"NotificationsApp",components:{IconBellOutline:Pr,IconClose:Yn,IconMessageOutline:eo,IconNotification:ts,NcButton:tt,NcEmptyContent:nr,NcHeaderMenu:cr,NotificationItem:Ms},setup(){return{fairUsePolicyNotification:zs,hasThrottledPushNotifications:Gs}},data(){return{webNotificationsGranted:!1,backgroundFetching:!1,hasNotifyPush:!1,shutdown:!1,notifications:[],lastETag:null,lastTabId:null,userStatus:null,tabId:null,webNotificationsThresholdId:0,pollIntervalBase:3e4,pollIntervalCurrent:3e4,interval:null,pushEndpoints:null,open:!1}},computed:{showBrowserNotifications(){return this.backgroundFetching&&this.webNotificationsGranted&&this.userStatus!=="dnd"&&this.tabId===this.lastTabId},emptyContentMessage(){return this.webNotificationsGranted===null?le("notifications","Requesting browser permissions to show notifications"):this.hasThrottledPushNotifications?this.fairUsePolicyNotification.subject:le("notifications","No notifications")},emptyContentDescription(){return this.hasThrottledPushNotifications?this.fairUsePolicyNotification.message:""}},mounted(){this.tabId=Di()||""+Math.random(),this._oldcount=0,this.checkWebNotificationPermissions(),this._fetch(),Sr.listen("notify_notification",()=>{this._fetchAfterNotifyPush()})&&(console.debug("Has notify_push enabled, slowing polling to 15 minutes"),this.pollIntervalBase=15*60*1e3,this.hasNotifyPush=!0),this._setPollingInterval(this.pollIntervalBase),this._watchTabVisibility(),kt("networkOffline",this.handleNetworkOffline),kt("networkOnline",this.handleNetworkOnline),kt("user_status:status.updated",this.userStatusUpdated)},beforeUnmount(){xt("user_status:status.updated",this.userStatusUpdated),xt("networkOffline",this.handleNetworkOffline),xt("networkOnline",this.handleNetworkOnline)},methods:{t:le,userStatusUpdated(c){Ui().uid===c.userId&&(this.userStatus=c.status)},async onOpen(){this.requestWebNotificationPermissions(),await Et(this.tabId),await this._fetch()},handleNetworkOffline(){console.debug("Network is offline, slowing down pollingInterval to "+this.pollIntervalBase*10),this._setPollingInterval(this.pollIntervalBase*10)},handleNetworkOnline(){this._fetch(),console.debug("Network is online, reseting pollingInterval to "+this.pollIntervalBase),this._setPollingInterval(this.pollIntervalBase)},setupBackgroundFetcher(){$s?(console.debug("Started background fetcher as session_keepalive is enabled"),this.interval=window.setInterval(this._backgroundFetch.bind(this),this.pollIntervalCurrent)):console.debug("Did not start background fetcher as session_keepalive is off")},onDismissAll(){Qe.delete(Ct("apps/notifications/api/v2/notifications")).then(()=>{this.notifications=[],this.open=!1,Et(this.tabId)}).catch(()=>{Nt(le("notifications","Failed to dismiss all notifications"))})},onRemove(c){this.notifications.splice(c,1),Et(this.tabId)},_updateDocTitleOnNewNotifications(c){c.length>this._oldcount&&(this._oldcount=c.length,this.backgroundFetching&&document.hidden&&(document.title.startsWith("* ")||(document.title="* "+document.title)))},_restoreTitle(){document.title.startsWith("* ")&&(document.title=document.title.substring(2))},_fetchAfterNotifyPush(){this.backgroundFetching=!0,this.hasNotifyPush&&this.tabId!==this.lastTabId?(console.debug("Deferring notification refresh from browser storage are notify_push event to give the last tab the chance to do it"),setTimeout(()=>{this._fetch()},5e3)):(console.debug("Refreshing notifications are notify_push event"),this._fetch())},async _fetch(){this.notifications.length&&this.notifications[0].notificationId>this.webNotificationsThresholdId&&(this.webNotificationsThresholdId=this.notifications[0].notificationId);const c=await to(this.tabId,this.lastETag,!this.backgroundFetching,this.hasNotifyPush);c.status===204?(console.debug("Fetching notifications but no content, slowing down polling to "+this.pollIntervalBase*10),this._setPollingInterval(this.pollIntervalBase*10)):c.status===200?(this.userStatus=c.headers["x-nextcloud-user-status"],this.lastETag=c.headers.etag,this.lastTabId=c.tabId,this.notifications=c.data,this.processWebNotifications(c.data),console.debug("Got notification data, restoring default polling interval."),this._setPollingInterval(this.pollIntervalBase),this._updateDocTitleOnNewNotifications(this.notifications),!this.backgroundFetching&&this.notifications.length&&(this.webNotificationsThresholdId=this.notifications[0].notificationId)):c.status===304?this._setPollingInterval(this.pollIntervalBase):c.status===503?(console.info("Slowing down notifications: instance is in maintenance mode."),this._setPollingInterval(this.pollIntervalBase*10)):c.status===404?(console.info("Slowing down notifications: app is disabled."),this._setPollingInterval(this.pollIntervalBase*10)):(console.info("Slowing down notifications: Status "+c.status),this._setPollingInterval(this.pollIntervalBase*10))},_backgroundFetch(){this.backgroundFetching=!0,this._fetch()},_watchTabVisibility(){document.addEventListener("visibilitychange",this._visibilityChange,!1)},_visibilityChange(){document.hidden||this._restoreTitle()},_setPollingInterval(c){this.interval&&c===this.pollIntervalCurrent||(console.debug("Polling interval updated to "+c),this.interval&&(window.clearInterval(this.interval),this.interval=null),this.pollIntervalCurrent=c,this.setupBackgroundFetcher())},_shutDownNotifications(c){console.debug("Shutting down notifications "+(c?"temporary":"bye")),this.interval&&(window.clearInterval(this.interval),this.interval=null),this.shutdown=!c},checkWebNotificationPermissions(){if(!("Notification"in window)){console.info("Browser does not support notifications"),this.webNotificationsGranted=!1;return}if(window.Notification.permission==="granted"){console.debug("Notifications permissions granted"),this.webNotificationsGranted=!0;return}if(window.Notification.permission==="denied"){console.debug("Notifications permissions denied"),this.webNotificationsGranted=!1;return}if(window.location.protocol==="http:"){console.debug("Notifications require HTTPS"),this.webNotificationsGranted=!1;return}console.info("Notifications permissions not yet requested"),this.webNotificationsGranted=null},async requestWebNotificationPermissions(){this.webNotificationsGranted===null&&(console.info("Requesting notifications permissions"),window.Notification.requestPermission().then(c=>{this.webNotificationsGranted=c==="granted"}))},processWebNotifications(c){c.forEach(g=>{this.backgroundFetching&&Ze("notifications:notification:received",{notification:g}),this.showBrowserNotifications&&this.webNotificationsThresholdId<g.notificationId&&Hs(g)})}}},Js={class:"notification-container"},Xs={key:1,class:"icon icon-alert-outline"},Ks={key:0,class:"dismiss-all"};function Qs(c,g,o,l,f,b){const v=ee("IconNotification"),I=ee("NotificationItem"),A=ee("IconBellOutline"),T=ee("IconMessageOutline"),B=ee("NcButton"),e=ee("NcEmptyContent"),n=ee("IconClose"),r=ee("NcHeaderMenu");return f.shutdown?G("",!0):(P(),Q(r,{key:0,id:"notifications",open:f.open,"onUpdate:open":g[0]||(g[0]=u=>f.open=u),class:"notifications-button","exclude-click-outside-selectors":[".popover"],"aria-label":b.t("notifications","Notifications"),title:b.t("notifications","Notifications"),onOpened:b.onOpen},{trigger:J(()=>[ie(v,{size:20,"show-dot":f.notifications.length!==0||f.webNotificationsGranted===null,"show-warning":l.hasThrottledPushNotifications},null,8,["show-dot","show-warning"])]),default:J(()=>[X("div",Js,[ie(Wi,{name:"fade",mode:"out-in"},{default:J(()=>[f.notifications.length>0?(P(),Q(Ji,{key:0,class:"notification-wrapper",name:"list",tag:"ul"},{default:J(()=>[l.hasThrottledPushNotifications?(P(),Q(I,{key:-2016,notification:l.fairUsePolicyNotification},null,8,["notification"])):G("",!0),(P(!0),j(Kn,null,Qn(f.notifications,(u,_)=>(P(),Q(I,{key:u.notificationId,notification:u,onRemove:y=>b.onRemove(_)},null,8,["notification","onRemove"]))),128))]),_:1})):(P(),Q(e,{key:1,name:b.emptyContentMessage,description:b.emptyContentDescription},Xi({icon:J(()=>[l.hasThrottledPushNotifications?(P(),j("span",Xs)):(P(),Q(A,{key:0}))]),_:2},[l.hasThrottledPushNotifications?{name:"action",fn:J(()=>[ie(B,{variant:"primary",href:"https://nextcloud.com/fairusepolicy",target:"_blank",rel:"noreferrer noopener"},{icon:J(()=>[ie(T,{size:20})]),default:J(()=>[Be(" "+$(b.t("notifications","Contact Nextcloud GmbH"))+" ↗ ",1)]),_:1})]),key:"0"}:void 0]),1032,["name","description"]))]),_:1}),f.notifications.length>0?(P(),j("div",Ks,[ie(B,{variant:"tertiary",wide:"",onClick:b.onDismissAll},{icon:J(()=>[ie(n,{size:20})]),default:J(()=>[Be(" "+$(b.t("notifications","Dismiss all notifications")),1)]),_:1},8,["onClick"])])):G("",!0)])]),_:1},8,["open","aria-label","title","onOpened"]))}const oa=fe(Ws,[["render",Qs],["__scopeId","data-v-57714b57"]]);export{oa as default};
//# sourceMappingURL=NotificationsApp-Dh-eDeaD.chunk.mjs.map
